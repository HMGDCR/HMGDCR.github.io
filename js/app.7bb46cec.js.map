{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/UserProfile/UserProfile.vue?ae02","webpack:///./src/components/Post/CreatePost/CreatePost.vue?5b9e","webpack:///./src/components/ColumnDetail/ColumnDetail.vue?670e","webpack:///./src/assets/column.jpg","webpack:///./src/components/Signup/Signup.vue?f22f","webpack:///./src/assets/avatar.jpg","webpack:///./src/components/Loader/Loader.vue?3fd4","webpack:///./src/App.vue","webpack:///./src/components/GlobalHeader/GlobalHeader.vue","webpack:///./src/components/Dropdown/Dropdown.vue","webpack:///./src/hooks/useClickOutside.ts","webpack:///./src/components/Dropdown/Dropdown.vue?d084","webpack:///./src/components/Dropdown/Dropdown.vue?855a","webpack:///./src/components/DropdownItem/DropdownItem.vue","webpack:///./src/components/DropdownItem/DropdownItem.vue?93ec","webpack:///./src/components/DropdownItem/DropdownItem.vue?72bc","webpack:///./src/components/GlobalHeader/GlobalHeader.vue?5198","webpack:///./src/components/GlobalHeader/GlobalHeader.vue?1be5","webpack:///./src/App.vue?3acc","webpack:///./src/App.vue?dfb6","webpack:///./src/components/home/index.vue","webpack:///./src/components/ColumnList/ColumnList.vue","webpack:///./src/api/request.ts","webpack:///./src/api/api.ts","webpack:///./src/api/index.ts","webpack:///./src/store/index.ts","webpack:///./src/components/Loader/Loader.vue","webpack:///./src/components/Loader/Loader.vue?be57","webpack:///./src/components/Loader/Loader.vue?787e","webpack:///./src/components/ColumnList/ColumnList.vue?a59c","webpack:///./src/components/ColumnList/ColumnList.vue?283a","webpack:///./src/components/Uploader/Uploader.vue","webpack:///./src/components/Uploader/Uploader.vue?ba55","webpack:///./src/components/Uploader/Uploader.vue?57b1","webpack:///./src/components/Message/Message.vue","webpack:///./src/hooks/useDOMCreate.ts","webpack:///./src/components/Message/Message.vue?4210","webpack:///./src/components/Message/Message.vue?c2ac","webpack:///./src/hooks/createMessage.ts","webpack:///./src/components/home/index.vue?4285","webpack:///./src/components/home/index.vue?ffbb","webpack:///./src/components/login/index.vue","webpack:///./src/components/form/Form.vue","webpack:///./src/components/validateInput/validateInput.vue","webpack:///./src/components/ValidateForm/ValidateForm.vue","webpack:///./src/components/ValidateForm/ValidateForm.vue?9b3a","webpack:///./src/components/ValidateForm/ValidateForm.vue?6267","webpack:///./src/components/validateInput/validateInput.vue?d726","webpack:///./src/components/validateInput/validateInput.vue?26e1","webpack:///./src/components/form/Form.vue?928d","webpack:///./src/components/form/Form.vue?1540","webpack:///./src/components/login/index.vue?3a5c","webpack:///./src/components/login/index.vue?b57b","webpack:///./src/components/mytest/testPage/index.vue","webpack:///./src/components/mytest/testPage/index.vue?5c4f","webpack:///./src/components/mytest/testPage/index.vue?12b6","webpack:///./src/components/mytest/testPage/testUseRoute/index1.vue","webpack:///./src/components/mytest/testPage/testUseRoute/index1.vue?bffc","webpack:///./src/components/mytest/testPage/testUseRoute/index2.vue","webpack:///./src/components/mytest/testPage/testUseRoute/index2.vue?95da","webpack:///./src/components/ColumnDetail/ColumnDetail.vue","webpack:///./src/components/PostList/PostList.vue","webpack:///./src/components/PostList/PostList.vue?ce2f","webpack:///./src/components/PostList/PostList.vue?a41e","webpack:///./src/components/ColumnDetail/ColumnDetail.vue?8aeb","webpack:///./src/components/ColumnDetail/ColumnDetail.vue?536c","webpack:///./src/views/PostDetail/PostDetail.vue","webpack:///./src/components/UserProfile/UserProfile.vue","webpack:///./src/helper/helper.ts","webpack:///./src/components/UserProfile/UserProfile.vue?dbfe","webpack:///./src/components/UserProfile/UserProfile.vue?ae5f","webpack:///./src/components/Modal/Modal.vue","webpack:///./src/components/Modal/Modal.vue?424e","webpack:///./src/components/Modal/Modal.vue?877b","webpack:///./src/views/PostDetail/PostDetail.vue?946a","webpack:///./src/views/PostDetail/PostDetail.vue?c8f2","webpack:///./src/components/Signup/Signup.vue","webpack:///./src/components/Signup/Signup.vue?b0da","webpack:///./src/components/Signup/Signup.vue?464a","webpack:///./src/components/Post/CreatePost/CreatePost.vue","webpack:///./src/components/Post/CreatePost/CreatePost.vue?e88a","webpack:///./src/components/Post/CreatePost/CreatePost.vue?cfc9","webpack:///./src/route/index.ts","webpack:///./src/main.ts","webpack:///./src/assets/logo.png","webpack:///./src/components/DropdownItem/DropdownItem.vue?3cff","webpack:///./src/components/PostList/PostList.vue?19c6"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","id","class","user","currentUser","href","isLogin","title","nickName","to","disabled","enAbleCreate","loginOut","goSignup","goLogin","ref","style","toggleOpen","isOpen","elementRef","isClickOutside","handler","e","contains","target","document","addEventListener","removeEventListener","props","type","String","required","setup","DropdownRef","render","Boolean","components","Dropdown","DropdownItem","store","state","router","commit","GlobalHeader","console","log","action","boforeUpload","onFileUploaded","onfileUploadedError","loading","list","testData","isLoading","text","background","columnList","column","_id","src","avatar","url","alt","description","goDetailColumn","a","defaults","baseURL","icode","interceptors","request","use","config","status","message","method","params","FormData","append","response","error","Promise","reject","GET_COLUMNS","SIGNUP","POSTS","param","currentPage","pageSize","getAndCommit","mutationName","postAndCommit","payload","columnsLocal","localStorage","getItem","postListLocal","columns","JSON","parse","posts","currentId","isLoding","token","mutations","login","removeItem","headers","common","Authorization","setUnAbleCreate","setCurrentId","setItem","setPostsData","fetchColumnsMutation","rawData","stringify","fetchDetailColumnMutation","fetchPostsMutation","val","setLoading","setError","fetchLoginMutation","fetchCurrentUserMutation","actions","fetchColumns","contex","Error","fetchDetailColumn","context","fetchPosts","fetchLogin","featchCurrentUser","loginAndFeach","loginData","dispatch","then","getters","getColumnById","find","getPostListById","filter","getCurrentColumn","getCurrentPost","item","color","role","default","node","createElement","body","appendChild","removeChild","__scopeId","Loader","Array","path","query","map","triggerUpload","$attrs","fileStatus","uploadData","handleFileChange","Function","inheritAttrs","emits","fileInput","click","currentTarget","files","fiels","from","formData","post","res","emit","catch","err","finally","isVisible","classOBject","hide","aria-label","useDOMCreate","nodeId","msgType","timeout","messageInstance","Message","mountNode","mount","setTimeout","unmount","ColumnList","Uploader","file","isPng","msg","for","onFormsubmit","submit","rules","emailRules","emailValue","placeholder","passwodrRules","passwordValue","tag","inputRef","updateValue","validateInput","submitForm","emitter","funArr","func","every","callback","on","off","modelValue","emailReg","allPassed","rule","passed","trim","test","validator","targetValue","ValidateForm","email","password","emailRef","Form","errorMeg","goUseRoute2","route","columnScale","PostList","goPostDetail","image","excerpt","createdAt","require","Number","lists","visible","modalIsVisible","hideAndDelete","currentPost","currentImageUrl","author","currentHTML","showEditArea","fitUrl","generateFitUrl","width","height","format","formatStr","reduce","prev","current","addColumnAvatar","parseCol","beforeUploadCheck","condition","size","isValidFormat","includes","isValidSize","arrToObj","arr","objToArr","obj","keys","testData2","1","2","result2","tabindex","data-dismiss","aria-hidden","onClose","onConfirm","UserProfile","Modal","md","isHTML","postAuthor","imgstr","reg","RegExp","tempImgUrl","nameRules","passwordRules","repeatPassword","repeatPasswordRules","ValidateInput","uploadCheck","fileUploaded","uploaded","dataProps","onFormSubmit","titleRules","titleVal","rows","contentRules","contentVal","uploadedData","imgUrl","aa","routerHistory","history","routes","component","meta","redictAlreadyLogin","Signup","ColumnDetail","UnAbleCreate","requiredLogin","isColumnDetail","PostDetail","CreatePost","beforeEach","next","app","App"],"mappings":"aACE,SAASA,EAAqBC,GAQ7B,IAPA,IAMIC,EAAUC,EANVC,EAAWH,EAAK,GAChBI,EAAcJ,EAAK,GACnBK,EAAiBL,EAAK,GAIHM,EAAI,EAAGC,EAAW,GACpCD,EAAIH,EAASK,OAAQF,IACzBJ,EAAUC,EAASG,GAChBG,OAAOC,UAAUC,eAAeC,KAAKC,EAAiBX,IAAYW,EAAgBX,IACpFK,EAASO,KAAKD,EAAgBX,GAAS,IAExCW,EAAgBX,GAAW,EAE5B,IAAID,KAAYG,EACZK,OAAOC,UAAUC,eAAeC,KAAKR,EAAaH,KACpDc,EAAQd,GAAYG,EAAYH,IAG/Be,GAAqBA,EAAoBhB,GAE5C,MAAMO,EAASC,OACdD,EAASU,OAATV,GAOD,OAHAW,EAAgBJ,KAAKK,MAAMD,EAAiBb,GAAkB,IAGvDe,IAER,SAASA,IAER,IADA,IAAIC,EACIf,EAAI,EAAGA,EAAIY,EAAgBV,OAAQF,IAAK,CAG/C,IAFA,IAAIgB,EAAiBJ,EAAgBZ,GACjCiB,GAAY,EACRC,EAAI,EAAGA,EAAIF,EAAed,OAAQgB,IAAK,CAC9C,IAAIC,EAAQH,EAAeE,GACG,IAA3BX,EAAgBY,KAAcF,GAAY,GAE3CA,IACFL,EAAgBQ,OAAOpB,IAAK,GAC5Be,EAASM,EAAoBA,EAAoBC,EAAIN,EAAe,KAItE,OAAOD,EAIR,IAAIQ,EAAmB,GAKnBhB,EAAkB,CACrB,IAAO,GAGJK,EAAkB,GAGtB,SAASS,EAAoB1B,GAG5B,GAAG4B,EAAiB5B,GACnB,OAAO4B,EAAiB5B,GAAU6B,QAGnC,IAAIC,EAASF,EAAiB5B,GAAY,CACzCK,EAAGL,EACH+B,GAAG,EACHF,QAAS,IAUV,OANAf,EAAQd,GAAUW,KAAKmB,EAAOD,QAASC,EAAQA,EAAOD,QAASH,GAG/DI,EAAOC,GAAI,EAGJD,EAAOD,QAKfH,EAAoBM,EAAIlB,EAGxBY,EAAoBO,EAAIL,EAGxBF,EAAoBQ,EAAI,SAASL,EAASM,EAAMC,GAC3CV,EAAoBW,EAAER,EAASM,IAClC3B,OAAO8B,eAAeT,EAASM,EAAM,CAAEI,YAAY,EAAMC,IAAKJ,KAKhEV,EAAoBe,EAAI,SAASZ,GACX,qBAAXa,QAA0BA,OAAOC,aAC1CnC,OAAO8B,eAAeT,EAASa,OAAOC,YAAa,CAAEC,MAAO,WAE7DpC,OAAO8B,eAAeT,EAAS,aAAc,CAAEe,OAAO,KAQvDlB,EAAoBmB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQlB,EAAoBkB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,kBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKxC,OAAOyC,OAAO,MAGvB,GAFAvB,EAAoBe,EAAEO,GACtBxC,OAAO8B,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOlB,EAAoBQ,EAAEc,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRtB,EAAoB0B,EAAI,SAAStB,GAChC,IAAIM,EAASN,GAAUA,EAAOiB,WAC7B,WAAwB,OAAOjB,EAAO,YACtC,WAA8B,OAAOA,GAEtC,OADAJ,EAAoBQ,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRV,EAAoBW,EAAI,SAASgB,EAAQC,GAAY,OAAO9C,OAAOC,UAAUC,eAAeC,KAAK0C,EAAQC,IAGzG5B,EAAoB6B,EAAI,IAExB,IAAIC,EAAaC,OAAO,gBAAkBA,OAAO,iBAAmB,GAChEC,EAAmBF,EAAW3C,KAAKsC,KAAKK,GAC5CA,EAAW3C,KAAOf,EAClB0D,EAAaA,EAAWG,QACxB,IAAI,IAAItD,EAAI,EAAGA,EAAImD,EAAWjD,OAAQF,IAAKP,EAAqB0D,EAAWnD,IAC3E,IAAIU,EAAsB2C,EAI1BzC,EAAgBJ,KAAK,CAAC,EAAE,kBAEjBM,K,+HCvJT,W,oCCAA,W,6DCAA,W,mECAAW,EAAOD,QAAU,mpB,oCCAjB,W,qBCAAC,EAAOD,QAAU,2tB,kCCAjB,W,oGCCO+B,GAAG,MAAMC,MAAM,a,sHAApB,eAIM,MAJN,EAIM,CAFJ,eAAoC,GAApBC,KAAM,EAAAC,aAAW,iBACjC,eAA2B,K,iBCHxBF,MAAM,mE,EACP,eAA0C,KAAvCA,MAAM,eAAeG,KAAK,KAAI,SAAK,G,SACbH,MAAM,oB,SAIpBA,MAAM,oB,GACTA,MAAM,+C,iBAG8C,M,iBAGM,Q,iBAGN,Q,iBAMI,Q,mJAtBpE,eA4BI,MA5BJ,EA4BI,CA3BA,EACW,EAAAC,KAAKG,S,iBAIhB,eAqBK,KArBL,EAqBK,CApBD,eAmBK,KAnBL,EAmBK,CAlBC,eAgBW,GAhBAC,MAAK,aAAQ,EAAAJ,KAAKK,W,yBACxB,iBAEe,CAFf,eAEe,Q,wBADZ,iBAA0D,CAA1D,eAA0D,GAA7CN,MAAM,gBAAgBO,GAAG,K,yBAAI,iBAAE,C,sBAEhD,eAEgB,GAFAC,SAAU,EAAAC,cAAY,C,wBAClC,iBAAkE,CAAlE,eAAkE,GAArDT,MAAM,gBAAgBO,GAAG,W,yBAAU,iBAAI,C,qCAExD,eAEgB,GAFAC,UAAU,GAAI,C,wBAC1B,iBAA4D,CAA5D,eAA4D,GAA/CR,MAAM,gBAAgBO,GAAG,K,yBAAI,iBAAI,C,sBAElD,eAEgB,Q,wBADZ,iBAA2D,CAA3D,eAA2D,KAAxDP,MAAM,gBAAiB,QAAK,8CAAU,EAAAU,UAAA,EAAAA,SAAA,qBAAQ,eAAE,Y,MAEvD,eAEgB,Q,wBADZ,iBAAgE,CAAhE,eAAgE,GAAnDV,MAAM,gBAAgBO,GAAG,S,yBAAQ,iBAAI,C,mEApBpE,eAGK,KAHL,EAGK,CAFH,eAAiF,MAA7EP,MAAM,8CAA+C,QAAK,8BAAE,EAAAW,UAAA,EAAAA,SAAA,sBAAU,MAC1E,eAAgF,MAA5EX,MAAM,8CAA+C,QAAK,8BAAE,EAAAY,SAAA,EAAAA,QAAA,sBAAS,W,OCJ1EZ,MAAM,WAAWa,IAAI,e,SAItBb,MAAM,gBAAiBc,MAAO,mB,gDAJlC,eAOI,MAPJ,EAOI,CANJ,eAEI,KAFDX,KAAK,IAAIH,MAAM,wCAAyC,QAAK,8CAAU,EAAAe,YAAA,EAAAA,WAAA,qBAAU,e,eACjF,EAAAV,OAAK,GAEmD,EAAAW,Q,iBAA3D,eAEK,KAFL,EAEK,CADH,eAAa,uB,4BCLjB,IAAM,EAAkB,SAACC,GACrB,IAAMC,EAAkB,gBAAI,GACtBC,EAAU,SAACC,GACTH,EAAWlC,QACPkC,EAAWlC,MAAMsC,SAASD,EAAEE,QAG5BJ,EAAenC,OAAQ,EAFvBmC,EAAenC,OAAQ,IAanC,OAPA,gBAAU,WACNwC,SAASC,iBAAiB,QAAQL,MAEtC,gBAAY,WACRI,SAASE,oBAAoB,QAAQN,MAGlCD,GAGI,ICjBA,iBAAgB,CAC3B5C,KAAM,WACNoD,MAAO,CACLrB,MAAO,CACLsB,KAAMC,OACNC,UAAU,IAGdC,MAR2B,WASzB,IAAMd,EAAS,gBAAI,GAEbD,EAAa,WACjBC,EAAOjC,OAASiC,EAAOjC,OAGnBgD,EAAc,eAAwB,MACtCb,EAAiB,EAAgBa,GAQrC,OANF,eAAMb,GAAe,YACdA,EAAenC,OAAQiC,EAAOjC,QACjCiC,EAAOjC,OAAQ,MAIV,CACLiC,SACAD,aACAgB,kBC7BV,EAAOC,OAAS,EAED,Q,gDCJb,eAEK,MAFDhC,MAAK,CAAC,kBAAiB,eAAyB,EAAAQ,Y,CAClD,eAAa,qB,GCCF,qBAAgB,CAC3BlC,KAAM,eACNoD,MAAO,CACLlB,SAAU,CACRmB,KAAMM,QACNJ,UAAU,IAGdC,MAR2B,WASzB,IAAMd,EAAS,gBAAI,GACbD,EAAa,WACjBC,EAAOjC,OAASiC,EAAOjC,OAEvB,MAAO,CACLiC,SACAD,iB,UCbV,EAAOiB,OAAS,EAED,Q,wBCEA,iBAAgB,CAC3B1D,KAAM,eACN4D,WAAY,CACRC,WACAC,gBAEJV,MAAO,CACHzB,KAAM,CACF0B,KAAKhF,OACLkF,UAAU,IAGlBC,MAZ2B,WAavB,IAAMrB,EAAe,gBAAS,kBAAM4B,EAAMC,MAAM7B,gBAG1C8B,GAFQ,iBAEC,kBACTF,EAAQ,iBACTzB,EAAU,WACX2B,EAAOvF,KAAK,WAEV2D,EAAW,WACb4B,EAAOvF,KAAK,YAEV0D,EAAW,WACb6B,EAAOvF,KAAK,UACZqF,EAAMG,OAAO,aAGjB,MAAO,CACJ5B,UACAF,WACAD,eACAE,eCvCX,EAAOqB,OAAS,EAED,QCKA,iBAAgB,CAC7B1D,KAAM,MACN4D,WAAY,CACVO,gBAEFX,MAL6B,WAO3B,IAAMO,EAAQ,iBACRnC,EAAc,gBAAS,WAC3B,OAAOmC,EAAMC,MAAMrC,QASrB,OAJA,gBAAU,WACTyC,QAAQC,IAAI,OAGN,CACLzC,kBC1BN,EAAO8B,OAASA,EAED,Q,ECEV,eAAqB,YAAf,YAAQ,G,iHANjB,eAWM,YAVJ,eAQW,GARDY,OAAO,UAChBC,aAAc,EAAAA,aACd,eAAe,EAAAC,eACf,oBAAqB,EAAAC,qB,CACVC,QAAO,gBAClB,iBAAqB,CAArB,M,gEAIC,eAA4C,GAA9BC,KAAM,EAAAC,UAAQ,mB,2BCV3BlD,MAAM,O,GAGAA,MAAM,wB,GACFA,MAAM,yB,GAEHA,MAAM,c,GACPA,MAAM,uB,+EAPvB,eAgBM,MAhBN,EAgBM,CAfY,EAAAmD,W,iBAAd,eAA2E,G,MAAlDC,KAAK,WAAWC,WAAW,wB,0CACpD,eAUM,2BAVgB,EAAAC,YAAU,SAApBC,G,wBAAZ,eAUM,OAV6BlE,IAAKkE,EAAOC,IAAKxD,MAAM,c,CACxD,eAOM,MAPN,EAOM,CANF,eAKM,MALN,EAKM,CAJF,eAAsH,OAAhHyD,IAAKF,EAAOG,QAASH,EAAOG,OAAOC,IAAK3D,MAAM,8CAA+C4D,IAAKL,EAAOlD,O,sBAC/G,eAA4C,KAA5C,EAA4C,eAAnBkD,EAAOlD,OAAK,GACrC,eAAyD,IAAzD,EAAyD,eAAxBkD,EAAOM,aAAW,GACnD,eAAgG,KAA7F1D,KAAK,IAAIH,MAAM,0BAA2B,QAAK,mCAAU,EAAA8D,eAAeP,EAAOC,OAAG,cAAG,OAAI,wB,mICF5G,EAAAO,EAAMC,SAASC,QAAU,6BACzB,IAAMC,EAAQ,mBAGd,EAAAH,EAAMI,aAAaC,QAAQC,KAAI,SAAAC,GAW3B,OAVA,GAAM9B,OAAO,WAAW,CAAC+B,QAAO,EAAMC,QAAQ,KACzB,OAAjBF,EAAOG,OACPH,EAAOI,OAAP,iCAAoBJ,EAAOI,QAA3B,IAAkCR,MAAOA,IAClCI,EAAOpI,gBAAgByI,SAC9BL,EAAOpI,KAAK0I,OAAO,QAASV,GAE5BI,EAAOpI,KAAP,iCAAkBoI,EAAOpI,MAAzB,IAA8BgI,MAAOA,IAGzC,GAAM1B,OAAO,cAAa,GACnB8B,KAGX,EAAAP,EAAMI,aAAaU,SAASR,KAAI,SAAAC,GAE5B,OADA,GAAM9B,OAAO,cAAa,GACnB8B,KACT,SAAAlD,GAAI,IACK0D,EAAS1D,EAAEyD,SAAS3I,KAApB4I,MAGP,OAFA,GAAMtC,OAAO,WAAW,CAAC+B,QAAO,EAAKC,QAAQM,IAC7C,GAAMtC,OAAO,cAAa,GACnBuC,QAAQC,OAAOF,MAGX,QAAf,ECnCaG,EAAc,UAEdC,EAAS,QAETC,EAAQ,QCmBR,EAAa,SAACC,GAAoB,MACAA,EAArCC,mBADqC,MACvB,IADuB,IACAD,EAAnBE,gBADmB,MACR,KADQ,EAG3C,OAAO,EAAM,CACT3B,IAAKsB,EACLR,OAAQ,MACRC,OAAQ,CACJW,cACAC,eAMC,EAAkB,SAACF,GAAqB,MACFA,EAAxCC,mBAD0C,MAC5B,IAD4B,IACFD,EAAtBE,gBADwB,MACb,KADa,EACRvF,EAAMqF,EAANrF,GACzC,OAAO,EAAM,CACT4D,IAAK,GAAF,OAAKsB,EAAL,YAAoBlF,GACvB0E,OAAO,MACPC,OAAQ,CACJW,cACAC,eAMC,EAAa,SAACF,GAAqB,MACGA,EAAxCC,mBADqC,MACvB,IADuB,IACGD,EAAtBE,gBADmB,MACR,KADQ,EACHvF,EAAMqF,EAANrF,GACzC,OAAO,EAAM,CACT4D,IAAG,UAAIsB,EAAJ,YAAmBlF,EAAnB,UACH0E,OAAO,MACPC,OAAQ,CACJW,cACAC,eAKC,EAAS,SAACF,GACnB,OAAO,EAAM,CACTzB,IAAKuB,EACLT,OAAQ,OACRvI,KAAMkJ,KAKD,GAAc,SAACA,GACxB,OAAO,EAAM,CACTzB,IAAIwB,EACJV,OAAQ,OACRvI,KAAMkJ,KCPRG,GAAY,yDAAG,WAAM5B,EAAW6B,EAAoBhD,GAArC,yGACI,EAAM7D,IAAIgF,GADd,uBACVzH,EADU,EACVA,KACPsG,EAAOgD,EAAatJ,GAFH,kBAGVA,GAHU,2CAAH,0DAOZuJ,GAAa,yDAAG,WAAM9B,EAAW6B,EAAoBhD,EAAckD,GAAnD,yGACG,EAAM,CACvB/B,IAAIA,EACJc,OAAQ,OACRvI,KAAMwJ,IAJQ,uBACXxJ,EADW,EACXA,KAKPsG,EAAOgD,EAAatJ,GANF,kBAOXA,GAPW,2CAAH,4DASbyJ,GAAeC,aAAaC,QAAQ,WACpCC,GAAgBF,aAAaC,QAAQ,YAErC,GAAQ,eAA8B,CACxCvD,MAAO,CACHwC,MAAO,CAACP,QAAO,GACfwB,QAAUJ,IAAcK,KAAKC,MAAMN,KAAgB,GACnDO,MAAQJ,IAAeE,KAAKC,MAAMH,KAAiB,GACnD7F,KAAM,CAACG,SAAS,GAChBK,cAAc,EACd0F,UAAWP,aAAaC,QAAQ,cAAc,GAC9CO,UAAU,EACVC,MAAOT,aAAaC,QAAQ,UAAY,IAG5CS,UAAW,CACPC,MADO,SACDjE,GACFI,QAAQC,IAAI,MAAML,IAItB5B,SANO,SAME4B,GACLA,EAAMrC,KAAN,iCAAiBqC,EAAMrC,MAAvB,IAA4BG,SAAQ,IACpCwF,aAAaY,WAAW,SACxBlE,EAAM+D,MAAQ,UACP,EAAMrC,SAASyC,QAAQC,OAAOC,eAEzCC,gBAZO,SAYStE,EAAMpG,GAClBoG,EAAM7B,aAAevE,GAGzB2K,aAhBO,SAgBMvE,EAAMpG,GACfwG,QAAQC,IAAI,UAAUzG,GACtB0J,aAAakB,QAAQ,YAAY5K,GACjCoG,EAAM6D,UAAYjK,GAItB6K,aAvBO,SAuBMzE,EAAMpG,GACfoG,EAAM4D,MAAN,CAAehK,GAAf,sBAAuBoG,EAAM4D,SAIjCc,qBA5BO,SA4Bc1E,EAAM2E,GACvB3E,EAAMyD,QAAUkB,EAAQ/K,KAAK+G,KAC7B2C,aAAakB,QAAQ,UAAUd,KAAKkB,UAAUD,EAAQ/K,KAAK+G,QAK/DkE,0BAnCO,SAmCmB7E,EAAM2E,GAE5B3E,EAAMyD,QAAU,CAACkB,EAAQ/K,OAG7BkL,mBAxCO,SAwCY9E,EAAM2E,GACrB,IAAMI,EAAMJ,EAAQ/K,KAAK+G,KACzB2C,aAAakB,QAAQ,WAAWd,KAAKkB,UAAUG,IAC/C/E,EAAM4D,MAAQmB,GAIlBC,WA/CO,SA+CIhF,EAAMiC,GACbjC,EAAM8D,SAAW7B,GAIrBgD,SApDO,SAoDEjF,EAAMlB,GACXkB,EAAMwC,MAAQ1D,GAIlBoG,mBAzDO,SAyDYlF,EAAM2E,GAAO,IACrBZ,EAASY,EAAQ/K,KAAjBmK,MACP/D,EAAM+D,MAAQA,EACdT,aAAakB,QAAQ,QAAQT,GAC7B,EAAMrC,SAASyC,QAAQC,OAAOC,cAA9B,iBAAwDN,IAK5DoB,yBAlEO,SAkEkBnF,EAAM2E,GAC3B3E,EAAMrC,KAAN,gBAAcG,SAAQ,GAAQ6G,EAAQ/K,QAI9CwL,QAAS,CAEAC,aAFA,SAEaC,GAAM,gLAEK,EAAW,IAFhB,gBAET1L,EAFS,EAETA,KACAsG,EAAUoF,EAAVpF,OACPA,EAAO,uBAAuBtG,GAJd,mDAMhB,IAAI2L,MAAJ,MANgB,4DAWnBC,kBAbA,SAakBC,EAAQrD,GAAM,uKAGtBlC,EAAUuF,EAAVvF,OAHsB,SAIR,EAAgBkC,GAJR,gBAItBxI,EAJsB,EAItBA,KACPsG,EAAO,4BAA4BtG,GALN,mDAO7B,IAAI2L,MAAJ,MAP6B,4DAahCG,WA1BA,SA0BWD,EAAQrD,GAAM,uKAEflC,EAAUuF,EAAVvF,OAFe,SAGC,EAAWkC,GAHZ,gBAGfxI,EAHe,EAGfA,KACPsG,EAAO,qBAAqBtG,GAJN,mDAMtB,IAAI2L,MAAJ,MANsB,4DAW9BI,WArCK,WAqCgBvC,GAAO,IAAflD,EAAe,EAAfA,OACX,OAAQiD,GAAc,aAAa,qBAAqBjD,EAAOkD,IAIjEwC,kBA1CK,YA0CsB,IAAP1F,EAAO,EAAPA,OACjB,OAAO+C,GAAa,eAAe,2BAA2B/C,IAIjE2F,cA/CK,WA+CoBC,GAAS,IAAnBC,EAAmB,EAAnBA,SACX,OAAOA,EAAS,aAAaD,GAAWE,MAAK,WACzC,OAAOD,EAAS,0BAK5BE,QAAS,CACLC,cAAc,SAAClG,GAAD,OAAW,SAACvC,GACtB,IAAMsH,EAAM/E,EAAMyD,QAAQ0C,MAAK,SAAArK,GAAC,OAAIA,EAAEoF,KAAOzD,KAC/C,OAASsH,IAGXqB,gBAAiB,SAACpG,GAAD,OAAW,SAACvC,GAEzB,OAAOuC,EAAM4D,MAAMyC,QAAO,SAAAvK,GAAC,OAAIA,EAAEmF,QAAUxD,OAI/C6I,iBAAkB,SAACtG,GAAD,OAAW,WACzB,IAAM+E,EAAM/E,EAAMyD,QAAQ0C,MAAK,SAACrK,GAAD,OAAmBA,EAAEoF,KAAOlB,EAAM6D,aACjE,GAAIkB,EACA,OAAOrB,KAAKC,MAAMD,KAAKkB,UAAUG,MAMzCwB,eAAgB,SAACvG,GAAD,OAAU,SAACvC,GACvB,IAAMsH,EAAM/E,EAAM4D,MAAMuC,MAAK,SAAAK,GAAI,OAAIA,EAAKtF,KAAOzD,KAKjD,OAJA2C,QAAQC,IAAI,WAAWL,EAAMyD,SAC7BrD,QAAQC,IAAI,MAAM0E,GAClB3E,QAAQC,IAAI,MAAM5C,GAEXsH,OAMJ,M,+EC3PErH,MAAM,mB,GAEC,eAA6C,QAAvCA,MAAM,2BAAyB,S,0EAPzD,eAYW,QAZDO,GAAG,WAAS,CAClB,eAUM,OATFP,MAAM,2EACLc,MAAK,YAAc,EAAAuC,YAAU,K,CAE9B,eAKM,MALN,GAKM,CAJF,eAEM,OAFDrD,MAAM,kBAAmBc,MAAK,OAAS,EAAAiI,OAAK,IAASC,KAAK,U,CACvD,I,GAEgC,EAAA5F,M,iBAAxC,eAA0D,K,MAArDtC,MAAK,OAAS,EAAAiI,OAAK,K,eAAwB,EAAA3F,MAAI,I,iCCRrD,kBAAgB,CAC/B1B,MAAO,CACH0B,KAAM,CACFzB,KAAMC,OACNqH,QAAS,IAEb5F,WAAY,CACR1B,KAAMC,QAEVmH,MAAO,CACHpH,KAAKC,OACLqH,QAAS,YAGjBnH,MAd+B,WAe3B,IAAMoH,EAAO3H,SAAS4H,cAAc,OACpCD,EAAKnJ,GAAK,SACVwB,SAAS6H,KAAKC,YAAYH,GAE1B,gBAAY,WACR3H,SAAS6H,KAAKE,YAAYJ,S,UCjBlC,GAAOlH,OAAS,GAChB,GAAOuH,UAAY,kBAEJ,UCDA,kBAAgB,CAC3BjL,KAAM,aACN4D,WAAY,CACRsH,WAEJ9H,MAAO,CACHuB,KAAM,CACFtB,KAAM8H,MACN5H,UAAU,IAGlBC,MAX2B,SAWrBJ,GACF,IAAMa,EAAS,iBAGTuB,EAAiB,SAAC/D,GACpB2C,QAAQC,IAAI,OAAO5C,GAEnBwC,EAAOvF,KAAK,CACR0M,KAAK,gBACLC,MAAO,CACH5J,GAAIA,MAQVuD,EAAa,gBAAS,WACxB,OAAO5B,EAAMuB,KAAK2G,KAAI,SAAArG,GAIlB,OAHKA,EAAOG,SACRH,EAAOG,OAAS,EAAQ,SAErBH,QAGTJ,EAAY,gBAAS,kBAAI,GAAMb,MAAM8D,YAC3C,MAAO,CACH9C,aACAQ,iBACAX,gBC7CZ,GAAOnB,OAAS,EAED,U,ICJRhC,MAAM,e,GAGC,eAAyD,UAAjDA,MAAM,kBAAkBQ,SAAA,IAAS,WAAO,G,GAGhD,eAA6C,UAArCR,MAAM,mBAAkB,QAAI,G,GAGpC,eAA8C,UAAtCA,MAAM,mBAAmB,QAAI,G,GAIrC,eAA6C,UAArCA,MAAM,mBAAkB,QAAI,G,iDAbhD,eAoBM,MApBN,GAoBM,CAnBF,eAcU,MAdV,eAcU,CAdLA,MAAM,wBAAyB,QAAK,8CAAU,EAAA6J,eAAA,EAAAA,cAAA,qBAAa,eAAU,EAAAC,QAAM,CACtD,YAAV,EAAAC,WAAZ,eAEO,4BAFP,iBAEO,CADH,OAEuB,WAAV,EAAAA,WAAjB,eAEO,qB,MAFoDC,WAAY,EAAAA,aAAvE,iBAEO,CADH,OAEuB,UAAV,EAAAD,WAAjB,eAEO,0BAFP,iBAEO,CADH,OAGJ,eAEO,4BAFP,iBAEO,CADH,Q,IAGR,eAG4B,SAHrBpI,KAAK,OACX3B,MAAM,oBACNa,IAAI,YACH,SAAM,8BAAE,EAAAoJ,kBAAA,EAAAA,iBAAA,sB,oCCRD,kBAAgB,CAC/BvI,MAAO,CACHkB,OAAQ,CACJjB,KAAKC,OACLC,UAAU,GAGdgB,aAAc,CACVlB,KAAMuI,WAGdC,cAAc,EAEdC,MAAO,CAAC,gBAAgB,uBACxBtI,MAd+B,SAczBJ,EAAMqG,GAGR,IAAMsC,EAAY,eAA6B,MAGzCL,EAAa,iBAIbD,EAAa,eAAoB,SAEjCF,EAAiB,WAEfQ,EAAUtL,OACXsL,EAAUtL,MAAMuL,SAKjBL,EAAoB,SAAC7I,GAEvB,IAAMmJ,EAAgBnJ,EAAEE,OAExB,GAAIiJ,EAAcC,MAAO,CAErB,IAAMC,EAAQhB,MAAMiB,KAAKH,EAAcC,OAGvC,GAAI9I,EAAMmB,aAAc,CACpB,IAAMtF,EAASmE,EAAMmB,aAAa4H,EAAM,IAGxC,IAAKlN,EACD,OAGRwM,EAAWhL,MAAQ,UACnB,IAAM4L,EAAW,IAAIhG,SAErBgG,EAAS/F,OAAO,OAAO6F,EAAM,IAC7B,EAAMG,KAAKlJ,EAAMkB,OAAQ+H,EAAS,CAC9BlE,QAAS,CACL,eAAgB,yBAErB6B,MAAK,SAAAuC,GACJd,EAAWhL,MAAQ,SAEnBiL,EAAWjL,MAAQ8L,EAAI3O,KACvB6L,EAAQ+C,KAAK,gBAAgBD,EAAI3O,SAElC6O,OAAM,SAAAC,GACLjB,EAAWhL,MAAQ,QACnBgJ,EAAQ+C,KAAK,sBAAsB,CAACE,WACrCC,SAAQ,WACHZ,EAAUtL,QACVsL,EAAUtL,MAAMA,MAAQ,SAQxC,MAAO,CACHsL,YACAR,gBACAI,mBACAF,aACAC,iBC5FR,GAAOhI,OAAS,GAED,U,iDCJb,eAMW,QANDzB,GAAG,YAAU,CAEM,EAAA2K,W,iBAD3B,eAIM,O,MAJDlL,MAAK,CAAC,gFACH,EAAAmL,c,CACJ,eAAwB,2BAAhB,EAAA3G,SAAO,GACf,eAA0F,UAAlF7C,KAAK,SAAS3B,MAAM,YAAa,QAAK,8CAAU,EAAAoL,MAAA,EAAAA,KAAA,qBAAI,cAAEC,aAAW,W,4BCFjF,SAASC,GAAaC,GAClB,IAAMrC,EAAO3H,SAAS4H,cAAc,OACpCD,EAAKnJ,GAAKwL,EACVhK,SAAS6H,KAAKC,YAAYH,GAE1B,gBAAY,WACR3H,SAAS6H,KAAKE,YAAYJ,MAInB,UCTA,kBAAgB,CAC3BxH,MAAO,CACH8C,QAAS5C,OACT4J,QAAS,CACL7J,KAAKC,OACLqH,QAAS,YAGjBmB,MAAO,CAAC,iBACRtI,MAT2B,SASrBJ,EAAMqG,GACR,GAAa,WACb,IAAMmD,EAAY,gBAAI,GAChBC,EAAc,CAChB,gBAAmC,YAAlBzJ,EAAM8J,QACvB,eAAkC,UAAlB9J,EAAM8J,QACtB,gBAAmC,YAAlB9J,EAAM8J,SAErBJ,EAAO,WACTF,EAAUnM,OAAQ,EAClBgJ,EAAQ+C,KAAK,iBAAgB,IAGjC,MAAO,CACHI,YACAC,cACAC,WC1BZ,GAAOpJ,OAAS,GAED,UCFT,GAAgB,SAACwC,EAAegH,GAAsC,IAAlBC,EAAkB,uDAAR,IAE1DC,EAAkB,eAAUC,GAAQ,CACtCnH,UACAgH,YAIEI,EAAYrK,SAAS4H,cAAc,OACzC5H,SAAS6H,KAAKC,YAAYuC,GAC1BF,EAAgBG,MAAMD,GAGtBE,YAAW,WAEPJ,EAAgBK,UAChBxK,SAAS6H,KAAKE,YAAYsC,KAC5BH,IAIS,MCZA,kBAAgB,CAC7BvJ,WAAY,CACV8J,cACAC,aAEFnK,MAL6B,WAO3B,IAAMO,EAAQ,iBAEd,gBAAU,WAERA,EAAMgG,SAAS,mBAGjB,IAAMpF,EAAO,gBAAS,kBAAMZ,EAAMC,MAAMyD,WAGlClD,EAAe,SAACqJ,GACpB,IAAMC,EAAqB,aAAbD,EAAKvK,KAInB,OAHKwK,GACH,GAAc,cAAc,SAEvBA,GAIHrJ,EAAiB,SAACmE,GACtBvE,QAAQC,IAAI,SAASsE,GAErB,GAAc,UAAD,OAAWA,EAAQ/K,KAAKsH,KAAM,YAGvCT,EAAsB,SAACiI,GAC3BtI,QAAQC,IAAI,MAAMqI,GAClB,IAAMoB,EAAMpB,EAAIoB,KAAO,SACvB,GAAc,QAAD,OAASA,GAAM,UAG9B,MAAO,CACLlJ,SAASD,EACTJ,eACAC,iBACAC,0BCnDN,GAAOf,OAAS,EAED,U,yGCJb,eAKM,YAFW,EAAAmB,W,iBAAd,eAA2E,G,MAAlDC,KAAK,WAAWC,WAAW,wB,sBACnD,eAAa,K,QCHVrD,MAAM,Q,GACP,eAAgE,SAAzDqM,IAAI,qBAAqBrM,MAAM,cAAa,SAAK,G,IAIzDA,MAAM,Q,GACT,eAA6D,SAAtDqM,IAAI,qBAAqBrM,MAAM,cAAa,MAAE,G,GAUnD,eAA0C,QAApCA,MAAM,kBAAiB,UAAM,G,0HAjBvC,eAoBc,GApBE,aAAa,EAAAsM,cAAY,CAgB9BC,OAAM,gBACb,iBAA0C,CAA1C,O,wBAhBF,iBAGM,CAHN,eAGM,MAHN,GAGM,CAFF,GACA,eAAmJ,GAAnI1L,IAAI,WAAY2L,MAAO,EAAAC,W,WAAqB,EAAAC,W,qDAAA,EAAAA,WAAU,IAAE3M,GAAG,qBAAqB4B,KAAK,OAAOgL,YAAY,W,iCAG9H,eAGM,MAHN,GAGM,CAFJ,GACC,eAA4I,GAA3HH,MAAO,EAAAI,cAAe7M,GAAG,qB,WAA8B,EAAA8M,c,qDAAA,EAAAA,cAAa,IAAElL,KAAK,WAAWgL,YAAY,S,sECRlH3M,MAAM,iC,UAoBCA,MAAM,oB,iDApBlB,eAqBM,MArBN,GAqBM,CAnBU,aAAH,EAAA8M,K,iBADT,eAQI,QARJ,eAQI,C,MAND9M,MAAK,CAAC,eAAc,cACE,EAAA+M,SAASjI,QAC9B/F,MAAO,EAAAgO,SAAS1F,IAChB,QAAK,8BAAE,EAAA2F,aAAA,EAAAA,YAAA,qBACP,OAAI,8BAAE,EAAAC,eAAA,EAAAA,cAAA,sBACC,EAAAnD,QAAM,qB,iBAEd,eASW,WATX,eASW,C,MAPP9J,MAAK,CAAC,eAAc,cACE,EAAA+M,SAASjI,QAC9B/F,MAAO,EAAAgO,SAAS1F,IAChB,QAAK,8BAAE,EAAA2F,aAAA,EAAAA,YAAA,qBACP,OAAI,8BAAE,EAAAC,eAAA,EAAAA,cAAA,sBACC,EAAAnD,QACX,eACD,eACoC,EAAAiD,SAASjI,O,iBAA7C,eAA8E,MAA9E,GAA8E,eAAxB,EAAAiI,SAASvI,SAAO,I,0CCpBpExE,MAAM,2B,GAOA,eAAyD,UAAjD2B,KAAK,SAAS3B,MAAM,mBAAkB,MAAE,G,iDAP5D,eAUO,OAVP,GAUO,CARH,eAA4B,oBAE5B,eAKM,OALDA,MAAM,cAAe,QAAK,8CAAU,EAAAkN,YAAA,EAAAA,WAAA,qBAAU,e,CAE/C,eAEO,sBAFP,iBAEO,CADH,W,iBCJHC,GAAU,kBAGR,kBAAgB,CAC3BjL,WAAW,GAGXkI,MAAO,CAAC,eACRtI,MAL2B,SAKrBJ,EAAMqG,GAET,IAAIqF,EAAuB,GACrBF,EAAa,WACfxK,QAAQC,IAAIyK,EAAOxD,KAAI,SAAAyD,GAAI,OAAIA,QAChC,IAAM9P,EAAS6P,EAAOxD,KAAI,SAAAyD,GAAI,OAAIA,OAAQC,OAAM,SAAA/P,GAAM,OAAIA,KAC1DwK,EAAQ+C,KAAK,cAAcvN,IAGxBgQ,EAAW,SAACF,GACd3K,QAAQC,IAAI,MAAM0K,GACdA,GACAD,EAAOpQ,KAAKqQ,IAUnB,OANAF,GAAQK,GAAG,oBAAoBD,GAC/B,gBAAY,WACRJ,GAAQM,IAAI,oBAAoBF,GAChCH,EAAS,MAGN,CACHF,iBChCZ,GAAOlL,OAAS,GAED,UCOA,kBAAgB,CAC3BN,MAAO,CACH8K,MAAO/C,MACPiE,WAAY9L,OACZkL,IAAKlL,QAETuI,cAAc,EACdrI,MAP2B,SAOrBJ,EAAMqG,GACR,IAAM4F,EAAW,qDACXZ,EAAW,eAAS,CACtB1F,IAAK3F,EAAMgM,YAAa,GACxB5I,OAAO,EACPN,QAAS,KAGPyI,EAAgB,WAClB,GAAGvL,EAAM8K,MAAO,CAEZ,IAAMoB,EAAYlM,EAAM8K,MAAMc,OAAM,SAAAO,GAChC,IAAIC,GAAS,EAEb,OADAf,EAASvI,QAAUqJ,EAAKrJ,QAChBqJ,EAAKlM,MACT,IAAK,WACFmM,EAAgC,IAAvBf,EAAS1F,IAAI0G,OACrB,MAEJ,IAAK,QACDD,EAASH,EAASK,KAAKjB,EAAS1F,KAChC,MACJ,IAAK,cACDyG,EAASf,EAAS1F,IAAI0G,OAAOrR,QAAU,EACvC,MACJ,IAAK,SACDoR,GAASD,EAAKI,WAAYJ,EAAKI,YAC/B,MACJ,QACI,MAER,OAAOH,KAGX,OADAf,EAASjI,OAAS8I,EACXA,EAEX,OAAO,GAELZ,EAAc,SAAC5L,GACjB,IAAI8M,EAAe9M,EAAEE,OAA4BvC,MACjDgO,EAAS1F,IAAM6G,EACfnG,EAAQ+C,KAAK,oBAAoBoD,IAOrC,OAJA,gBAAU,WACNf,GAAQrC,KAAK,oBAAoBmC,MAG9B,CACJF,WACAE,gBACAD,kBCnEX,GAAOhL,OAAS,GAED,UCKA,kBAAgB,CAC3BE,WAAW,CACP+K,cAAA,GACAkB,iBAEJrM,MAL2B,WASxB,IAAIsM,EAAQ,aACRC,EAAW,SACR3B,EAAa,eAAI0B,GACjBvB,EAAgB,eAAIwB,GACpBtB,EAAW,eAAS,IACpBN,EAAuB,CACzB,CAAC9K,KAAM,WAAW6C,QAAS,eAC3B,CAAC7C,KAAM,QAAQ6C,QAAS,gBAEtBoI,EAA0B,CAC5B,CAACjL,KAAM,WAAW6C,QAAS,aAEzB8J,EAAW,eAAS,CACtBjH,IAAK,GACLvC,OAAO,EACPN,QAAS,KAGPjC,EAAS,iBACTF,EAAQ,iBAERiK,EAAe,SAAC/O,GAClB,GAAIA,EAAQ,CACR,IAAImI,EAAU,CACV0I,MAAO1B,EAAW3N,MAClBsP,SAAUxB,EAAc9N,OAO5BsD,EAAMgG,SAAS,gBAAgB3C,GAAS4C,MAAK,SAAApM,GACxC,GAAc,UAAU,WACzBwG,QAAQC,IAAI,QAAQzG,GAEpB4P,YAAW,WAEPvJ,EAAOvF,KAAK,OACd,QAEH+N,OAAM,SAAAjG,GACLpC,QAAQC,IAAImC,QAQxB,MAAO,CACHwJ,WACA7B,aACAG,gBACAF,aACAG,gBACAP,eACAS,eCzEZ,GAAO/K,OAAS,GAED,UCGA,kBAAgB,CAC7BE,WAAY,CACVqM,QACA/E,WAGF1H,MAN6B,SAMvBJ,GACH,IAAMyB,EAAY,gBAAS,kBAAI,GAAMb,MAAM8D,YACrCoI,EAAW,gBAAS,kBAAM,GAAMlM,MAAMwC,SAQ5C,OANA,gBAAM,kBAAI0J,EAASzP,MAAMwF,UAAO,WAAI,MACTiK,EAASzP,MAA3ByF,EAD2B,EAC3BA,QAAQD,EADmB,EACnBA,OACXC,GAAWD,GACb,GAAcC,EAAQ,YAGnB,CACLrB,YACAqL,eCvBP,GAAOxM,OAAS,GAED,U,ICHLhC,MAAM,O,IACJA,MAAM,Y,kBACkF,gC,IAEvFA,MAAM,Y,kBAC4D,iC,IAEnEA,MAAM,Y,qFARhB,eAYM,YAXF,eAUK,KAVL,GAUK,CATH,eAEK,KAFL,GAEK,CADD,eAAkI,GAApHO,GAAI,iCAAqCP,MAAM,kBAAkBG,KAAK,K,yBAAI,iBAA4B,C,eAEvH,eAEI,KAFJ,GAEI,CADD,eAA8G,GAAhGI,GAAE,eAAkBP,MAAM,kBAAkBG,KAAK,K,yBAAI,iBAA6B,C,eAEpG,eAEK,KAFL,GAEK,CADD,eAAiF,KAA9EH,MAAM,WAAY,QAAK,8CAAU,EAAAyO,aAAA,EAAAA,YAAA,qBAAW,cAAEtO,KAAK,KAAI,6BCPvD,sBAAgB,CAC3B+B,WAAY,GAGZJ,MAJ2B,WAKvB,IAAMS,EAAS,iBACTkM,EAAc,WAChBlM,EAAOvF,KAAK,CACRsB,KAAM,YACNoG,OAAQ,CACJ3E,GAAI,MAIhB,MAAO,CACH0O,kBCfZ,GAAOzM,OAAS,GAED,U,iDCJb,eAEM,YADF,eAAoB,0BAAb,EAAA0M,OAAK,KAOH,sBAAgB,CAC3BxM,WAAY,GAGZJ,MAJ2B,WAKvB,IAAM4M,EAAQ,iBACd,MAAO,CACHA,YCbZ,GAAO1M,OAAS,GAED,U,iDCJb,eAEM,YADF,eAAoB,0BAAb,EAAA0M,OAAK,KAOH,sBAAgB,CAC3BxM,WAAY,GAGZJ,MAJ2B,WAKvB,IAAM4M,EAAQ,iBACd,MAAO,CACHA,YCbZ,GAAO1M,OAAS,GAED,U,+ECJRhC,MAAM,mC,UACJA,MAAM,8D,IACJA,MAAM,qB,IAGNA,MAAM,S,IAENA,MAAM,c,4GAPf,eAWM,MAXN,GAWM,CAV0E,EAAA2O,a,iBAA9E,eAQM,MARN,GAQM,CAPJ,eAEM,MAFN,GAEM,CADJ,eAAgH,OAA1GlL,IAAK,EAAAkL,YAAYjL,QAAU,EAAAiL,YAAYjL,OAAOC,IAAMC,IAAK,EAAA+K,YAAYtO,MAAOL,MAAM,yB,wBAE1F,eAGM,MAHN,GAGM,CAFJ,eAA8B,yBAAxB,EAAA2O,YAAYtO,OAAK,GACvB,eAAqD,IAArD,GAAqD,eAA7B,EAAAsO,YAAY9K,aAAW,Q,sBAGnD,eAA2D,GAA/CsC,UAAW,EAAAA,UAAYlD,KAAM,EAAAA,M,mICVtCjD,MAAM,a,IAEFA,MAAM,a,IAEJA,MAAM,+B,UACcA,MAAM,S,IAKzBA,MAAM,c,yDAVW,EAAA4O,U,iBAA7B,eAaM,MAbN,GAaM,E,mBAZJ,eAWU,2BAXc,EAAAA,UAAQ,SAAhBhE,G,wBAAhB,eAWU,WAX+BvL,IAAKuL,EAAKpH,IAAKxD,MAAM,uB,CAC5D,eASM,MATN,GASM,CARJ,eAAuE,KAAnEG,KAAK,IAAK,QAAK,mCAAU,EAAA0O,aAAajE,EAAKpH,OAAG,c,eAAKoH,EAAKvK,OAAK,eACjE,eAKM,MALN,GAKM,CAJOuK,EAAKkE,O,iBAAhB,eAEM,MAFN,GAEM,CADJ,eAA8E,OAAxErL,IAAKmH,EAAKkE,OAASlE,EAAKkE,MAAMnL,IAAMC,IAAKgH,EAAKvK,MAAOL,MAAM,c,+CAEnE,eAA2F,KAAvFA,MAAK,UAAY4K,EAAKkE,OAASlE,EAAKkE,MAAMnL,KAAY,e,eAAeiH,EAAKmE,SAAO,KAEvF,eAAkD,OAAlD,GAAkD,eAAvBnE,EAAKoE,WAAS,U,kCCJlC,kBAAgB,CAC3BtN,MAAO,CACHuB,KAAM,CACFgM,SAAU,EACVtN,KAAM8H,OAEVtD,UAAW,CACT8I,SAAS,EACTtN,KAAMuN,SAGZpN,MAX2B,SAWrBJ,GACJ,IAAMW,EAAQ,iBACR8M,EAAS,gBAAS,kBAAM9M,EAAMC,MAAM4D,MAAMyC,QAAO,SAAAvK,GAAC,OAAIA,EAAEmF,QAAU7B,EAAMyE,gBAG1EyI,EAAW,gBAAS,WAAK,MAC7B,iBAAOlN,EAAMuB,YAAb,aAAO,EAAY2G,KAAI,SAACd,GAItB,OAHIA,EAAKgG,QACPhG,EAAKgG,MAAMnL,IAAMmF,EAAKgG,MAAMnL,IAAM,4DAE7BmF,QAGH+F,EAAe,SAAC9O,GACpB,GAAO/C,KAAK,CACVsB,KAAM,aACNoG,OAAQ,CACN3E,SAIN,MAAO,CACLoP,QACAN,eACAD,e,UCrCR,GAAO5M,OAAS,GAChB,GAAOuH,UAAY,kBAEJ,UCCA,kBAAgB,CAC7BrH,WAAY,CACV0M,SAAA,IAEF9M,MAJ6B,WAK3B,IAAM4M,EAAQ,iBACRrM,EAAQ,iBACR8D,EAAYuI,EAAM/E,MAAM5J,GAC9B,gBAAU,WACVsC,EAAMgG,SAAS,oBAAoB,CAACtI,GAAGoG,IACvC9D,EAAMgG,SAAS,aAAa,CAACtI,GAAGoG,OAkBhC,IAAMwI,EAAc,gBAAS,WAEzB,IAAMpL,EAAUlB,EAAMkG,QAAQC,cAAcrC,GAI5C,OAHI5C,EAAOG,SACTH,EAAOG,OAAOC,IAAMJ,EAAOG,OAAOC,IAAM,4DAEnCJ,KAMLN,EAAO,gBAAS,kBAAKZ,EAAMC,MAAM4D,SAEvC,MAAO,CAELjD,OACAkD,UAAW+I,OAAO/I,GAClBwI,kB,UClDN,GAAO3M,OAAS,GAChB,GAAOuH,UAAY,kBAEJ,U,iBCPRvJ,MAAM,oB,GAKP,eAAkB,SAAf,eAAW,G,UAEPA,MAAM,0B,IAETA,MAAM,Q,IACLA,MAAM,wF,IACJA,MAAM,O,IAGLA,MAAM,yC,UAGWA,MAAM,kB,kBAK5B,Q,gJAtBP,eA4BM,MA5BN,GA4BM,CA3BJ,eAKQ,GALDK,MAAM,OAAQ+O,QAAS,EAAAC,eAC3B,eAAc,+BAAE,EAAAA,gBAAc,IAC9B,iBAAkB,EAAAC,e,yBAEnB,iBAAkB,CAAlB,O,uCAE4C,EAAAC,a,iBAA9C,eAoBU,UApBV,GAoBU,CAnBoF,EAAAC,iB,iBAA5F,eAA6G,O,MAAvG/L,IAAK,EAAA+L,gBAAiB5L,IAAI,oBAAoB5D,MAAM,6B,uCAC1D,eAA2C,KAA3C,GAA2C,eAAxB,EAAAuP,YAAYlP,OAAK,GACpC,eAKM,MALN,GAKM,CAJJ,eAEM,MAFN,GAEM,CADoE,W,gBAAlB,EAAAkP,YAAYE,S,iBAAlE,eAAsG,G,MAAvFxP,KAAM,EAAAsP,YAAYE,Q,0CAEnC,eAAwF,OAAxF,GAAoD,OAAI,eAAE,EAAAF,YAAYP,WAAS,KAEjF,eAAgC,OAA3B,UAAQ,EAAAU,aAAW,sBACb,EAAAC,c,iBAAX,eASM,MATN,GASM,CARJ,eAMc,GALZhO,KAAK,SACL3B,MAAM,kBACLO,GAAE,yBAAgC,EAAAgP,YAAY/L,O,yBAChD,iBAED,C,sBACA,eAA+F,UAAvF7B,KAAK,SAAS3B,MAAM,iBAAkB,QAAK,+CAAU,EAAAqP,gBAAc,mBAAS,S,+GCzBrFrP,MAAM,0B,IACJA,MAAM,6B,IAEJA,MAAM,e,IACLA,MAAM,gB,IACJA,MAAM,oC,iDALlB,eAQM,MARN,GAQM,CAPJ,eAMM,MANN,GAMM,CALJ,eAA6E,OAAvEyD,IAAK,EAAAmM,OAAShM,IAAK,EAAA3D,KAAKK,SAAUN,MAAM,gC,sBAC9C,eAGM,MAHN,GAGM,CAFJ,eAA+C,KAA/C,GAA+C,eAApB,EAAAC,KAAKK,UAAQ,GACxC,eAA0E,OAA1E,GAA0E,eAAzB,EAAAL,KAAK4D,aAAW,S,yCCJnE,SAAUgM,GAAe3T,EAAkB4T,EAAeC,GAAkC,IAAlBC,EAAkB,uDAAT,CAAC,SACxF,GAAI9T,GAAQA,EAAKyH,IAAK,CACpB,IAAMsM,EAAYD,EAAOE,QAAO,SAACC,EAAMC,GACrC,OAAOA,EAAU,IAAMD,IACtB,IACHjU,EAAK0T,OAAS1T,EAAKyH,IAAL,sCAA0CsM,EAA1C,aAAwDF,EAAxD,cAAoED,IAIhF,SAAUO,GAAgBnU,EAA+B4T,EAAeC,GAC5E,GAAI7T,EAAKwH,OACPmM,GAAe3T,EAAKwH,OAAQoM,EAAOC,OAC9B,CACL,IAAMO,EAAWpU,EACjBA,EAAKwH,OAAS,CACZkM,OAAQ,EAAQU,EAASjQ,MAAQ,OAAwB,UAUzD,SAAUkQ,GAAkBrE,EAAYsE,GAAyB,IAC7DR,EAAiBQ,EAAjBR,OAAQS,EAASD,EAATC,KACVC,GAAgBV,GAASA,EAAOW,SAASzE,EAAKvK,MAC9CiP,GAAcH,GAAQvE,EAAKuE,KAAO,KAAO,KAAOA,EAClD3L,EAAmB,KAOvB,OANK4L,IACH5L,EAAQ,UAEL8L,IACH9L,EAAQ,QAEH,CACLgJ,OAAQ4C,GAAiBE,EACzB9L,SAOJ,IAAM5B,GAAwB,CAAC,CAAEM,IAAK,IAAKlF,KAAM,KAAO,CAAEkF,IAAK,IAAKlF,KAAM,MAE7DuS,GAAW,SAA6BC,GACnD,OAAOA,EAAIZ,QAAO,SAACC,EAAMC,GAIvB,OAHIA,EAAQ5M,MACV2M,EAAKC,EAAQ5M,KAAO4M,GAEfD,IACN,KAEC,GAASU,GAAS3N,IACxBR,QAAQC,IAAI,IACL,IAAMoO,GAAW,SAAIC,GAC1B,OAAOrU,OAAOsU,KAAKD,GAAKpH,KAAI,SAAAvK,GAAG,OAAI2R,EAAI3R,OAEnC6R,GAAwC,CAC5CC,EAAG,CAAE3N,IAAK,IAAKlF,KAAM,KACrB8S,EAAG,CAAE5N,IAAK,IAAKlF,KAAM,MAGjB+S,GAAUN,GAASG,IACzBxO,QAAQC,IAAI0O,IChEG,sBAAgB,CAC7B3P,MAAO,CACLzB,KAAM,CACJ0B,KAAMhF,OACNkF,UAAU,IAGdC,MAP6B,SAOvBJ,GACJ,IAAMkO,EAAS,gBAAS,WACtBS,GAAgB3O,EAAMzB,KAAM,GAAI,IADL,IAEnByD,EAAWhC,EAAMzB,KAAjByD,OACR,OAAOA,GAAUA,EAAOkM,UAE1B,MAAO,CACLA,a,UCbN,GAAO5N,OAAS,GAED,U,UCLRhC,MAAM,gBAAgBsR,SAAS,M,IAC7BtR,MAAM,gB,IACJA,MAAM,iB,IACJA,MAAM,gB,IACLA,MAAM,e,IACF2B,KAAK,SAAS3B,MAAM,QAAQuR,eAAa,QAAQlG,aAAW,S,IAIjErL,MAAM,c,IAGNA,MAAM,gB,iDAbnB,eAoBW,QApBDO,GAAG,UAAQ,CAC4B,EAAA6O,S,iBAA/C,eAkBM,MAlBN,GAkBM,CAjBJ,eAgBM,MAhBN,GAgBM,CAfJ,eAcM,MAdN,GAcM,CAbJ,eAKM,MALN,GAKM,CAJJ,eAAsC,KAAtC,GAAsC,eAAZ,EAAA/O,OAAK,GAC/B,eAES,SAFT,GAES,CADP,eAAwD,QAAlDmR,cAAY,OAAQ,QAAK,8BAAE,EAAAC,SAAA,EAAAA,QAAA,sBAAS,SAG9C,eAEM,MAFN,GAEM,CADJ,eAAa,sBAEf,eAGM,MAHN,GAGM,CAFJ,eAAkG,UAA1F9P,KAAK,SAAS3B,MAAM,oBAAoBuR,eAAa,QAAU,QAAK,8BAAE,EAAAE,SAAA,EAAAA,QAAA,sBAAS,MACvF,eAA6E,UAArE9P,KAAK,SAAS3B,MAAM,kBAAoB,QAAK,8BAAE,EAAA0R,WAAA,EAAAA,UAAA,sBAAW,e,wBCb7D,sBAAgB,CAC7BpT,KAAM,QACNoD,MAAO,CACLrB,MAAOuB,OACPwN,QAAS,CACPzN,KAAMM,QACNgH,SAAS,IAGbmB,MAAO,CAAC,iBAAkB,oBAC1BtI,MAV6B,SAUvBJ,EAAOqG,GACX,GAAa,SACb,IAAM0J,EAAU,WACd1J,EAAQ+C,KAAK,mBAET4G,EAAY,WAChB3J,EAAQ+C,KAAK,qBAEf,MAAO,CACL2G,UACAC,gBCpBN,GAAO1P,OAAS,GAED,UCKA,kBAAgB,CAC7B1D,KAAM,cACN4D,WAAY,CACVyP,eACAC,UAEF9P,MAN6B,WAO3B,IAAMO,EAAQ,iBACRqM,EAAQ,iBACRnM,EAAS,iBACT8M,EAAiB,gBAAI,GACrBlJ,EAAYuI,EAAMhK,OAAO3E,GACzB8R,EAAK,IAAI,KACf,gBAAU,WACRxP,EAAMgG,SAAS,YAAalC,MAE9B,IAAMoJ,EAAc,gBAAoB,kBAAMlN,EAAMkG,QAAQM,eAAe1C,MAErEuJ,EAAc,gBAAS,WAC3BhN,QAAQC,IAAI,sBAAsB4M,EAAYxQ,OADd,MAGJwQ,EAAYxQ,MAAhCgQ,EAHwB,EAGxBA,QAHwB,EAGf+C,OAEjB,OAAIvC,EAAYxQ,OAASgQ,EAEf8C,EAAG7P,OAAO+M,GAEX,MAILY,EAAe,gBAAS,WAAK,MACRtN,EAAMC,MAAMrC,KAA7BG,EADyB,EACzBA,QAASoD,EADgB,EAChBA,IACjB,GAAI+L,EAAYxQ,OAASwQ,EAAYxQ,MAAM0Q,QAAUrP,EAAS,CAC5D,IAAM2R,EAAaxC,EAAYxQ,MAAM0Q,OACrC,OAAOsC,EAAWvO,MAAQA,EAE1B,OAAO,KAGLgM,EAAkB,gBAAS,WAC/B,GAAID,EAAYxQ,OAASwQ,EAAYxQ,MAAM+P,MAAO,CAChDpM,QAAQC,IAAI,KACZ,IAAMqP,EAAS,2DACPlD,EAAUS,EAAYxQ,MAAtB+P,MACJmD,EAAMC,OAAO,uBACXC,EAAcrD,EAAqBnL,KAAO,GAEhD,OAAOsO,EAAIjE,KAAKmE,GAAcA,EAAYA,EAAWH,EAErD,OAAO,QAIL1C,EAAgB,WACpBD,EAAetQ,OAAQ,EACvBsD,EAAMgG,SAAS,aAAclC,GAAWmC,MAAK,SAACrB,GAC5C,GAAc,kBAAmB,UAAW,KAC5C,IAAIvC,EAAS,CAAE3E,GAAIkH,EAAQ/K,KAAKqH,QAGhCuI,YAAW,WAETvJ,EAAOvF,KAAK,CACVsB,KAAM,eACNqL,MAAMjF,MAEP,SAGP,MAAO,CACL6K,cACAC,kBACAE,cACAC,eACAN,iBACAC,oBCnFN,GAAOtN,OAAS,GAED,U,ICJRhC,MAAM,iC,GACT,eAAwC,MAApCA,MAAM,oBAAmB,UAAM,G,IAE5BA,MAAM,Q,GACT,eAAsC,SAA/BA,MAAM,cAAa,QAAI,G,IAQ3BA,MAAM,Q,GACT,eAAoC,SAA7BA,MAAM,cAAa,MAAE,G,IAQzBA,MAAM,Q,GACT,eAAoC,SAA7BA,MAAM,cAAa,MAAE,G,IAQzBA,MAAM,Q,GACT,eAAsC,SAA/BA,MAAM,cAAa,QAAI,G,GAS9B,eAAgF,UAAxE2B,KAAK,SAAS3B,MAAM,uCAAsC,SAAK,G,0HAxC7E,eA2CM,MA3CN,GA2CM,CA1CJ,GACA,eAwCgB,GAxCA,aAAa,EAAAsM,cAAY,CAqC5BC,OAAM,gBACf,iBAAgF,CAAhF,O,wBArCF,iBAQM,CARN,eAQM,MARN,GAQM,CAPJ,GACA,eAKE,GAJAI,YAAY,UACZhL,KAAK,O,WACI,EAAAgJ,SAASyD,M,qDAAT,EAAAzD,SAASyD,MAAK,IACtB5B,MAAO,EAAAC,Y,iCAGZ,eAQM,MARN,GAQM,CAPJ,GACA,eAKE,GAJAE,YAAY,QACZhL,KAAK,O,WACI,EAAAgJ,SAASrK,S,qDAAT,EAAAqK,SAASrK,SAAQ,IACzBkM,MAAO,EAAA4F,W,iCAGZ,eAQM,MARN,GAQM,CAPJ,GACA,eAKE,GAJAzQ,KAAK,WACLgL,YAAY,Q,WACH,EAAAhC,SAAS0D,S,qDAAT,EAAA1D,SAAS0D,SAAQ,IACzB7B,MAAO,EAAA6F,e,iCAGZ,eAQM,MARN,GAQM,CAPJ,GACA,eAKE,GAJA1Q,KAAK,WACLgL,YAAY,Q,WACH,EAAAhC,SAAS2H,e,qDAAT,EAAA3H,SAAS2H,eAAc,IAC7B9F,MAAO,EAAA+F,qB,gEC3BL,sBAAgB,CAC7BjU,KAAM,SACN4D,WAAY,CACVsQ,cAAA,GACArE,iBAEFrM,MAN6B,WAO3B,IAAM6I,EAAW,eAAS,CACxByD,MAAO,GACP9N,SAAU,GACV+N,SAAU,GACViE,eAAgB,KAGb/P,EAAS,iBAERkK,GADO,iBACiB,CAC5B,CAAE9K,KAAM,WAAY6C,QAAS,cAC7B,CAAE7C,KAAM,QAAS6C,QAAS,kBAEtB4N,EAAuB,CAC3B,CAAEzQ,KAAM,WAAY6C,QAAS,WAEzB6N,EAA2B,CAC/B,CAAE1Q,KAAM,WAAY6C,QAAS,UAC7B,CAAC7C,KAAM,cAAe6C,QAAS,iBAE3B+N,EAAiC,CACrC,CAAE5Q,KAAM,WAAY6C,QAAS,YAC7B,CACE7C,KAAM,SACNsM,UAAW,WACT,OAAOtD,EAAS0D,WAAa1D,EAAS2H,gBAExC9N,QAAS,UAIP8H,EAAe,SAAC/O,GAElB,GADAmF,QAAQC,IAAIpF,GACRA,EAAQ,CAER,IAAI6H,EAAoB,CACpBgJ,MAAOzD,EAASyD,MAChB9N,SAAUqK,EAASrK,SACnB+N,SAAU1D,EAAS0D,UAEvB,EAAOjJ,GAAOkD,MAAK,SAAAuC,GACfnI,QAAQC,IAAI,QAAQkI,GADC,IAEduD,EAASvD,EAAI3O,KAAKA,KAAlBkS,MACPxI,aAAakB,QAAQ,aAAasH,GAClC,GAAc,OAAO,WACrBtC,YAAW,WACPvJ,EAAOvF,KAAK,YACd,QAEH+N,OAAM,SAAAC,GACLtI,QAAQC,IAAI,QAAQqI,GACpB,GAAcA,EAAI,cAQ9B,MAAO,CACHL,WACA2B,eACAG,aACA2F,YACAC,gBACAE,0B,UC7ER,GAAOvQ,OAAS,GAED,U,ICNRhC,MAAM,oB,GAQP,eAAe,UAAX,UAAM,G,GAEN,eAKM,OALDA,MAAM,UAAQ,CACjB,eAEM,OAFDA,MAAM,gCAAgCgJ,KAAK,U,CAC9C,eAA+C,QAAzChJ,MAAM,mBAAkB,gBAEhC,eAAa,UAAT,U,MASR,eAAa,UAAT,QAAI,G,IAKLA,MAAM,Q,GACT,eAAuC,SAAhCA,MAAM,cAAa,SAAK,G,IAO5BA,MAAM,Q,GACT,eAAuC,SAAhCA,MAAM,cAAa,SAAK,G,IAUvBA,MAAM,6B,uJA/CpB,eAoDM,MApDN,GAoDM,CAnDJ,eAA6C,yBAAvC,EAAA0O,MAAM/E,MAAM5J,GAAE,kBACpB,eAwBW,GAvBX6C,OAAO,UACNC,aAAc,EAAA4P,YACd,eAAe,EAAAC,aAChB1S,MAAM,uF,CAGOgD,QAAO,gBACd,iBAKM,CALN,OAQO2P,SAAQ,gBACf,SAD0B,GAC1B,MAD0B,CAC1B,eAAiD,OAA3ClP,IAAKmP,EAAU5I,WAAW9N,KAAKyH,IAAKC,IAAI,I,oBAGvCkB,MAAK,gBACd,iBAAa,CAAb,O,wBAfF,iBAAe,CAAf,O,0CAmBF,eAwBgB,GAxBA,aAAa,EAAA+N,cAAY,CAmB5BtG,OAAM,gBACf,iBAES,CAFT,eAES,SAFT,GAES,eADL,EAAAmC,MAAM/E,MAAM5J,GAAE,sB,wBApBpB,iBAOM,CAPN,eAOM,MAPN,GAOM,CANJ,GACA,eAIE,GAHCyM,MAAO,EAAAsG,W,WAAqB,EAAAC,S,qDAAA,EAAAA,SAAQ,IACrCpG,YAAY,UACZhL,KAAK,Q,iCAGT,eASM,MATN,GASM,CARJ,GACA,eAME,GALAqR,KAAK,KACLlG,IAAI,WACJH,YAAY,UACXH,MAAO,EAAAyG,a,WACC,EAAAC,W,qDAAA,EAAAA,WAAU,K,gEC1Bd,sBAAgB,CAC7B5U,KAAM,aACN4D,WAAY,CACVsQ,cAAA,GACArE,gBACAlC,aAEFnK,MAP6B,WAQ3B,IAAMqR,EAAe,iBACfJ,EAAW,eAAI,IACfxQ,EAAS,iBACTmM,EAAQ,iBACRrM,EAAQ,iBACR+Q,EAAS,eAAI,IAEbN,EAAwB,CAC5B,CAAEnR,KAAM,WAAY6C,QAAS,aAEzB0O,EAAa,eAAI,IACjBD,EAA0B,CAC9B,CAAEtR,KAAM,WAAY6C,QAAS,aAE/B,gBAAU,WACR9B,QAAQC,IAAI,mBACZD,QAAQC,IAAI,mBAAmB+L,EAAM/E,MAAM5J,OAK7C,IAAM2S,EAAe,SAACxW,GACpBwG,QAAQC,IAAI,OAAOzG,EAAKA,KAAKsH,KACzBtH,EAAKA,KAAKsH,MACZ4P,EAAOrU,MAAQ7C,EAAKA,KAAKsH,KAE3Bd,QAAQC,IAAI,WAAWyQ,EAAOrU,QAK3BoH,EAAY,gBAAS,kBAAK9D,EAAMC,MAAM6D,aAC5CzD,QAAQC,IAAI,aAAawD,GACzB,IAAMkN,EAAKzN,aAAaC,QAAQ,aAChCnD,QAAQC,IAAI,MAAM0Q,GAElB,IAAMpT,EAAO,gBAAS,kBAAMoC,EAAMC,MAAMrC,QACxCyC,QAAQC,IAAI,QAAQ1C,GAtChB,MAwC+BA,EAAKlB,MAAZyE,GAxCxB,EAwCED,OAxCF,EAwCS6K,MAxCT,EAwCe9N,SAxCf,EAwCwBkD,KACrBqP,EAAe,SAACtV,GAGtB,GAFEmF,QAAQC,IAAI,kBAAkBpF,GAE5BA,EAAQ,CACTmF,QAAQC,IAAI,aAAawD,EAAUpH,OACpC,IAAMqG,EAAQ,CACZ,MAAS2N,EAAShU,MAClB,QAAWmU,EAAWnU,MACtB,MAASqU,EAAOrU,MAChB,OAAUoH,EAAUpH,MAGpB,OAAUyE,GAEZ,GAAY4B,GAAOkD,MAAK,SAAAuC,GACtB,GAAc,oBAAoB,WAClCiB,YAAW,WACTvJ,EAAOvF,KAAK,CAACsB,KAAK,eAAeqL,MAAM,CAAC5J,GAAGoG,EAAUpH,WACrD,QAEDgM,OAAM,SAAAC,GACP,GAAc,OAAO,SACrBtI,QAAQC,IAAI,QAAQqI,QAQlByH,EAAc,SAACvG,GACnB,IAAM3O,EAASgT,GAAkBrE,EAAK,CAAC8D,OAAQ,CAAC,aAAa,aAAaS,KAAK,IACxE3C,EAAgBvQ,EAAhBuQ,OAAOhJ,EAASvH,EAATuH,MAUd,OATApC,QAAQC,IAAI,QAAQmC,GAEN,WAAVA,GACF,GAAc,mBAAmB,SAGrB,SAAVA,GACF,GAAc,cAAc,SAEvBgJ,GAIT,MAAO,CACLgF,aACAC,WACAG,aACAD,eACAJ,eACAM,eACAzE,QACA+D,cACAC,mB,UCpHN,GAAO1Q,OAAS,GAED,UCWTsR,GAAgB,iBAChB,GAAS,eAAa,CACxBC,QAASD,GACTE,OAAQ,CACJ,CACI9J,KAAM,IACNpL,KAAM,OACNmV,UAAW,IAEf,CACI/J,KAAM,SACNpL,KAAM,QACNmV,UAAW,GACXC,KAAM,CACFC,oBAAoB,IAG5B,CACIjK,KAAM,UACNpL,KAAM,SACNmV,UAAWG,IAEf,CACIlK,KAAM,QACNpL,KAAM,OACNmV,UAAW,IAEf,CACI/J,KAAM,iBACNpL,KAAM,YACNmV,UAAW,IAEf,CACI/J,KAAM,iBACNpL,KAAM,YACNmV,UAAW,IAEf,CACI/J,KAAM,gBACNpL,KAAM,eACNmV,UAAWI,GACXH,KAAM,CACFI,cAAc,EACdC,eAAe,EACfC,gBAAgB,IAGxB,CACItK,KAAM,kBACNpL,KAAM,aACNmV,UAAWQ,IAEf,CACIvK,KAAM,UACNpL,KAAM,SACNmV,UAAWS,GACXR,KAAM,CACFI,cAAc,EACdC,eAAe,OAK/B,GAAOI,YAAW,SAAC5T,EAAImK,EAAM0J,GAAQ,MACZ,GAAM9R,MAApBrC,EAD0B,EAC1BA,KAAKoG,EADqB,EACrBA,MADqB,EAEyB9F,EAAGmT,KAAtDK,EAF0B,EAE1BA,cAAcJ,EAFY,EAEZA,mBAAmBK,EAFP,EAEOA,eAKrCA,GACC,GAAMxR,OAAO,mBAAkB,GAC/B,GAAMA,OAAO,eAAejC,EAAGoJ,MAAM5J,KAErC,GAAMyC,OAAO,mBAAkB,GAE9BvC,EAAKG,QAkCFuT,EAEAS,EAAK,KAGLA,IAtCA/N,GAIA,EAAAtC,EAAMC,SAASyC,QAAQC,OAAOC,cAA9B,iBAAwDN,GACxD,GAAMgC,SAAS,qBAAqBC,MAAK,WAEjCqL,EAEAS,EAAK,KAELA,OAELrJ,OAAM,SAAAC,GAELoJ,EAAK,UACL,GAAM5R,OAAO,gBAObuR,EAEAK,EAAK,UAELA,OAkBD,UCrITC,GAAM,eAAUC,GACtBD,GAAIhQ,IAAI,IACRgQ,GAAIhQ,IAAI,IACRgQ,GAAIxI,MAAM,S,qBCVV5N,EAAOD,QAAU,IAA0B,yB,gFCA3C,W,kCCAA","file":"js/app.7bb46cec.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./UserProfile.vue?vue&type=style&index=0&id=5da5f91c&lang=css\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./CreatePost.vue?vue&type=style&index=0&id=c2689340&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./ColumnDetail.vue?vue&type=style&index=0&id=361fc9f6&scoped=true&lang=css\"","module.exports = \"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAgGBgcGBQgHBwcJCQgKDBQNDAsLDBkSEw8UHRofHh0aHBwgJC4nICIsIxwcKDcpLDAxNDQ0Hyc5PTgyPC4zNDL/2wBDAQkJCQwLDBgNDRgyIRwhMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjL/wAARCAAyADIDASIAAhEBAxEB/8QAGQABAQEBAQEAAAAAAAAAAAAAAAMEAQUH/8QAKhAAAgIBAgMGBwAAAAAAAAAAAAECAxEEEiFBURQxU3GR4RNCUmFik+L/xAAVAQEBAAAAAAAAAAAAAAAAAAAAAf/EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhEDEQA/APrwB2MXKSjFZb5FRwFlpL33Vt+Q7Jf4UgIgpZRZUk5waTJgAAANehlXCc52NJJYyzIWr4Vp9Zdei9wN2/QZ+T0Y36D8fRmPcvq4efuN33Xr/RFaNTOj4DdGzPc8LkeeXbTUuOcxfPyfUgVAAACtVsIRcZ1Kcc5XHGCQA1rV1xSSpkkuStZ3tsPBl+1mMAXndVtaroUG1jO5sgAAAAAAAAAAAAAAAf/Z\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Signup.vue?vue&type=style&index=0&id=403eb674&lang=css\"","module.exports = \"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAgGBgcGBQgHBwcJCQgKDBQNDAsLDBkSEw8UHRofHh0aHBwgJC4nICIsIxwcKDcpLDAxNDQ0Hyc5PTgyPC4zNDL/2wBDAQkJCQwLDBgNDRgyIRwhMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjL/wAARCAAyADIDASIAAhEBAxEB/8QAGgABAQADAQEAAAAAAAAAAAAAAAUBAgMEB//EAC8QAAIBAgMDCgcAAAAAAAAAAAABAgMRBBIxIUGhBRMyNFFhcpHB8BRScbHC0eH/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/8QAFBEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEQMRAD8A+zgAAAYctun8AyAAAAAN2tfS4nTlRhTlN3jOKeZ9ttGaVXalLwv7FqKyxS7EBIjGc+hTlL6L104nqw+Ellq88ks6UUk9q1d+PA7YulWrUlGhV5qWZNvuPRuAk4rDzwuGlVdSDtayyvbxJvxlVWd4Ndli5ynBTwFROST1V97ItDCu6lNWtu/YHrc7OwNsqAGtXocPPZ6lsitZqlOPzTiuN/QtAAABJxSc8bUzNvK7R7lZaeZqlY6Yrrk/e5HMAAAM0eu0PH+LK4AAAAS8V12fvcjmAAAAH//Z\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Loader.vue?vue&type=style&index=0&id=54296f1b&scoped=true&lang=css\"","<template>\r\n  <div id=\"app\" class=\"container\">\r\n   \r\n    <global-header :user=\"currentUser\"/>\r\n    <router-view></router-view>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport 'bootstrap/dist/css/bootstrap.min.css'\r\nimport {defineComponent,computed,onMounted} from 'vue'\r\n\r\nimport GlobalHeader  from './components/GlobalHeader/GlobalHeader.vue'\r\nimport {useStore} from 'vuex'\r\nimport {GlobalDataProps} from '@/store/index'\r\nimport axios from '@/api/request'\r\n\r\n/* 使用store，获取user数据,并采用持久化 */\r\nexport default defineComponent({\r\n  name: 'App',\r\n  components: {\r\n    GlobalHeader,\r\n  },\r\n  setup() {\r\n    \r\n    const store = useStore<GlobalDataProps>()\r\n    const currentUser = computed(() => {\r\n      return store.state.user\r\n    })\r\n /*    if (!currentUser.value.isLogin) {\r\n      router.push('/login')\r\n    } */\r\n    onMounted(() => {\r\n     console.log('');\r\n     \r\n    })\r\n    return {\r\n      currentUser\r\n    }\r\n  }\r\n})\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\r\n","<template>\r\n  <nav class=\"navbar navbar-dark bg-primary justify-content-between mb-4 px-4\">\r\n      <a class=\"navbar-brand\" href=\"#\">稻草人专栏</a>\r\n      <ul v-if=\"!user.isLogin\" class=\"list-inline mb-0\">\r\n        <li class=\"list-inline-item btn btn-outline-light my-2\" @click=\"goSignup\">注册</li>\r\n        <li class=\"list-inline-item btn btn-outline-light my-2\" @click=\"goLogin\">登录</li>\r\n      </ul>\r\n      <ul v-else class=\"list-inline mb-0\">\r\n          <li class=\"list-inline-item btn btn-outline-light my-2\">\r\n                <dropdown :title=\"`您好，${user.nickName}`\">\r\n                     <dropdown-item>\r\n                        <router-link class=\"dropdown-item\" to=\"/\">首页</router-link>\r\n                    </dropdown-item>\r\n                    <dropdown-item :disabled=\"enAbleCreate\">\r\n                        <router-link class=\"dropdown-item\" to=\"/create\">新建文章</router-link>\r\n                    </dropdown-item>\r\n                    <dropdown-item :disabled=\"true\">\r\n                        <router-link class=\"dropdown-item\" to=\"/\">编辑资料</router-link>\r\n                    </dropdown-item>\r\n                    <dropdown-item>\r\n                        <a class=\"dropdown-item\" @click.prevent=\"loginOut\">退出登录</a>\r\n                    </dropdown-item>\r\n                    <dropdown-item>\r\n                        <router-link class=\"dropdown-item\" to=\"/test\">测试路由</router-link>\r\n                    </dropdown-item>\r\n                </dropdown>\r\n\r\n          </li>\r\n      </ul>\r\n</nav>\r\n</template>\r\n\r\n<script lang='ts'>\r\n/* 采用store请求用户信息接口，返回用户信息 */\r\nimport {computed, defineComponent,PropType} from 'vue'\r\nimport Dropdown from '../Dropdown/Dropdown.vue'\r\nimport DropdownItem from '../DropdownItem/DropdownItem.vue'\r\nimport {useRouter,useRoute} from 'vue-router'\r\nimport {useStore} from 'vuex'\r\nimport {GlobalDataProps,UserProps} from '@/store/index'\r\n\r\nexport default defineComponent({\r\n    name: 'GlobalHeader',\r\n    components: {\r\n        Dropdown,\r\n        DropdownItem\r\n    },\r\n    props: {\r\n        user: {\r\n            type:Object as PropType<UserProps>,\r\n            required: true\r\n        }\r\n    },\r\n    setup() {\r\n        const enAbleCreate = computed(() => store.state.enAbleCreate)\r\n        const route = useRoute()\r\n       \r\n        const router = useRouter()\r\n        const store = useStore<GlobalDataProps>()\r\n       const goLogin = () => {\r\n            router.push('/login')\r\n        }\r\n        const goSignup = () => {\r\n            router.push('/signup')\r\n        }\r\n        const loginOut = () => {\r\n            router.push('/login')\r\n            store.commit('loginOut')\r\n        }\r\n       \r\n        return {\r\n           goLogin,\r\n           loginOut,\r\n           enAbleCreate,\r\n           goSignup\r\n        }\r\n    }\r\n\r\n})\r\n</script>\r\n\r\n<style>\r\n\r\n</style>","<template>\r\n  <div class=\"dropdown\" ref=\"DropdownRef\">\r\n  <a href=\"#\" class=\"btn btn-outline-hight dropdown-toggle\" @click.prevent=\"toggleOpen\">\r\n   {{title}}\r\n  </a>\r\n  <ul class=\"dropdown-menu\" :style=\"{display:'block'}\" v-if=\"isOpen\">\r\n    <slot></slot>\r\n  </ul>\r\n</div>\r\n</template>\r\n\r\n<script lang='ts'>\r\nimport {defineComponent,ref,watch} from 'vue'\r\n\r\nimport useClickOutside from '../../hooks/useClickOutside'\r\n\r\nexport default defineComponent({\r\n    name: 'Dropdown',\r\n    props: {\r\n      title: {\r\n        type: String,\r\n        required: true\r\n      }\r\n    },\r\n    setup() {\r\n      const isOpen = ref(false)\r\n\r\n      const toggleOpen = () => {\r\n        isOpen.value = !isOpen.value\r\n      }\r\n      \r\n      const DropdownRef = ref<null | HTMLElement>(null)\r\n      const isClickOutside = useClickOutside(DropdownRef)\r\n\r\n      watch(isClickOutside,()=> {\r\n        if (!isClickOutside.value &&isOpen.value) {\r\n          isOpen.value = false\r\n        }\r\n      })\r\n\r\n        return {\r\n          isOpen,\r\n          toggleOpen,\r\n          DropdownRef\r\n        }\r\n    }\r\n})\r\n</script>\r\n\r\n<style>\r\n\r\n</style>","import {Ref,ref,onMounted,onUnmounted} from 'vue'\r\nconst useClickOutside = (elementRef: Ref<null| HTMLElement>)=> {\r\n    const isClickOutside  = ref(false)\r\n    const handler = (e:MouseEvent) => {\r\n        if (elementRef.value) {\r\n            if(!elementRef.value.contains(e.target as HTMLElement)) {\r\n                isClickOutside.value = false\r\n            } else {\r\n                isClickOutside.value = true\r\n            }\r\n        }\r\n    }\r\n    onMounted(()=> {\r\n        document.addEventListener('click',handler)\r\n    })\r\n    onUnmounted(()=> {\r\n        document.removeEventListener('click',handler)\r\n    })\r\n\r\n    return isClickOutside\r\n}\r\n\r\nexport default useClickOutside","\r\nimport {defineComponent,ref,watch} from 'vue'\r\n\r\nimport useClickOutside from '../../hooks/useClickOutside'\r\n\r\nexport default defineComponent({\r\n    name: 'Dropdown',\r\n    props: {\r\n      title: {\r\n        type: String,\r\n        required: true\r\n      }\r\n    },\r\n    setup() {\r\n      const isOpen = ref(false)\r\n\r\n      const toggleOpen = () => {\r\n        isOpen.value = !isOpen.value\r\n      }\r\n      \r\n      const DropdownRef = ref<null | HTMLElement>(null)\r\n      const isClickOutside = useClickOutside(DropdownRef)\r\n\r\n      watch(isClickOutside,()=> {\r\n        if (!isClickOutside.value &&isOpen.value) {\r\n          isOpen.value = false\r\n        }\r\n      })\r\n\r\n        return {\r\n          isOpen,\r\n          toggleOpen,\r\n          DropdownRef\r\n        }\r\n    }\r\n})\r\n","import { render } from \"./Dropdown.vue?vue&type=template&id=f08e3aa8\"\nimport script from \"./Dropdown.vue?vue&type=script&lang=ts\"\nexport * from \"./Dropdown.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<template>\r\n  <li class=\"dropdown-option\" :class=\"{'is-disabled': disabled}\">\r\n    <slot></slot>\r\n  </li>\r\n</template>\r\n\r\n<script lang='ts'>\r\nimport {defineComponent,ref} from 'vue'\r\n\r\nexport default defineComponent({\r\n    name: 'DropdownItem',\r\n    props: {\r\n      disabled: {\r\n        type: Boolean,\r\n        required: false\r\n      }\r\n    },\r\n    setup() {\r\n      const isOpen = ref(false)\r\n      const toggleOpen = () => {\r\n        isOpen.value = !isOpen.value\r\n      }\r\n        return {\r\n          isOpen,\r\n          toggleOpen\r\n        }\r\n    }\r\n})\r\n</script>\r\n\r\n<style>\r\n  .dropdown-option.is-disabled *{\r\n    color: #6c757d;\r\n    pointer-events:none;\r\n    background-color: transparent;\r\n  }\r\n</style>","\r\nimport {defineComponent,ref} from 'vue'\r\n\r\nexport default defineComponent({\r\n    name: 'DropdownItem',\r\n    props: {\r\n      disabled: {\r\n        type: Boolean,\r\n        required: false\r\n      }\r\n    },\r\n    setup() {\r\n      const isOpen = ref(false)\r\n      const toggleOpen = () => {\r\n        isOpen.value = !isOpen.value\r\n      }\r\n        return {\r\n          isOpen,\r\n          toggleOpen\r\n        }\r\n    }\r\n})\r\n","import { render } from \"./DropdownItem.vue?vue&type=template&id=ce05ae80\"\nimport script from \"./DropdownItem.vue?vue&type=script&lang=ts\"\nexport * from \"./DropdownItem.vue?vue&type=script&lang=ts\"\n\nimport \"./DropdownItem.vue?vue&type=style&index=0&id=ce05ae80&lang=css\"\nscript.render = render\n\nexport default script","\r\n/* 采用store请求用户信息接口，返回用户信息 */\r\nimport {computed, defineComponent,PropType} from 'vue'\r\nimport Dropdown from '../Dropdown/Dropdown.vue'\r\nimport DropdownItem from '../DropdownItem/DropdownItem.vue'\r\nimport {useRouter,useRoute} from 'vue-router'\r\nimport {useStore} from 'vuex'\r\nimport {GlobalDataProps,UserProps} from '@/store/index'\r\n\r\nexport default defineComponent({\r\n    name: 'GlobalHeader',\r\n    components: {\r\n        Dropdown,\r\n        DropdownItem\r\n    },\r\n    props: {\r\n        user: {\r\n            type:Object as PropType<UserProps>,\r\n            required: true\r\n        }\r\n    },\r\n    setup() {\r\n        const enAbleCreate = computed(() => store.state.enAbleCreate)\r\n        const route = useRoute()\r\n       \r\n        const router = useRouter()\r\n        const store = useStore<GlobalDataProps>()\r\n       const goLogin = () => {\r\n            router.push('/login')\r\n        }\r\n        const goSignup = () => {\r\n            router.push('/signup')\r\n        }\r\n        const loginOut = () => {\r\n            router.push('/login')\r\n            store.commit('loginOut')\r\n        }\r\n       \r\n        return {\r\n           goLogin,\r\n           loginOut,\r\n           enAbleCreate,\r\n           goSignup\r\n        }\r\n    }\r\n\r\n})\r\n","import { render } from \"./GlobalHeader.vue?vue&type=template&id=18bd4a04\"\nimport script from \"./GlobalHeader.vue?vue&type=script&lang=ts\"\nexport * from \"./GlobalHeader.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","\r\nimport 'bootstrap/dist/css/bootstrap.min.css'\r\nimport {defineComponent,computed,onMounted} from 'vue'\r\n\r\nimport GlobalHeader  from './components/GlobalHeader/GlobalHeader.vue'\r\nimport {useStore} from 'vuex'\r\nimport {GlobalDataProps} from '@/store/index'\r\nimport axios from '@/api/request'\r\n\r\n/* 使用store，获取user数据,并采用持久化 */\r\nexport default defineComponent({\r\n  name: 'App',\r\n  components: {\r\n    GlobalHeader,\r\n  },\r\n  setup() {\r\n    \r\n    const store = useStore<GlobalDataProps>()\r\n    const currentUser = computed(() => {\r\n      return store.state.user\r\n    })\r\n /*    if (!currentUser.value.isLogin) {\r\n      router.push('/login')\r\n    } */\r\n    onMounted(() => {\r\n     console.log('');\r\n     \r\n    })\r\n    return {\r\n      currentUser\r\n    }\r\n  }\r\n})\r\n","import { render } from \"./App.vue?vue&type=template&id=3df01c2e\"\nimport script from \"./App.vue?vue&type=script&lang=ts\"\nexport * from \"./App.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<template>\r\n  <div>\r\n    <Uploader action=\"/upload\" \r\n    :boforeUpload=\"boforeUpload\" \r\n    @file-uploaded=\"onFileUploaded\"\r\n    @file-uploaded-error=\"onfileUploadedError\">\r\n     <template #loading>\r\n     <span>正在上传中。。。</span>\r\n     </template>\r\n     \r\n    </Uploader>\r\n      <column-list :list=\"testData\"></column-list>\r\n  </div>\r\n</template>\r\n\r\n<script lang='ts'>\r\n/* 使用上传文件，自定义模板 */\r\nimport {defineComponent,computed,onMounted} from 'vue'\r\nimport ColumnList from '@/components/ColumnList/ColumnList.vue'\r\n\r\nimport {useStore} from 'vuex'\r\nimport {GlobalDataProps,ResponseType,ImageProps} from '@/store/index'\r\n\r\nimport Uploader from '@/components/Uploader/Uploader.vue'\r\n\r\nimport createMessage from '@/hooks/createMessage'\r\n\r\nexport default defineComponent({\r\n  components: {\r\n    ColumnList,\r\n    Uploader\r\n  },\r\n  setup(){\r\n    // 为了能够更好的提示，我们这里使用泛型\r\n    const store = useStore<GlobalDataProps>()\r\n\r\n    onMounted(() => {\r\n      // 经过此方式，把请求到的数据赋值给columns\r\n      store.dispatch('fetchColumns')\r\n    })\r\n   // 然后\r\n    const list = computed(()=>  store.state.columns)\r\n\r\n    // 做上传前的一系列检查\r\n    const boforeUpload = (file:File) => {\r\n      const isPng = file.type == 'image/png'\r\n      if (!isPng) {\r\n        createMessage('上传文件格式不是png','error')\r\n      }\r\n      return isPng\r\n    }\r\n\r\n    // 上传成功\r\n    const onFileUploaded = (rawData:ResponseType<ImageProps>) => {\r\n      console.log('上传成功了：',rawData);\r\n      \r\n      createMessage(`上传图片ID ${rawData.data._id}`,'success')\r\n    }\r\n    // 上传失败\r\n    const onfileUploadedError = (err:ResponseType<ImageProps>) => {\r\n      console.log('err',err);\r\n      const msg = err.msg || '上传路径错误'\r\n      createMessage(`上传文件 ${msg}`,'error')\r\n      \r\n    }\r\n    return {\r\n      testData:list,\r\n      boforeUpload,\r\n      onFileUploaded,\r\n      onfileUploadedError\r\n    }\r\n  }\r\n})\r\n</script>\r\n\r\n<style>\r\n\r\n</style>","<template>\r\n  <div class=\"row\">\r\n      <Loader v-if=\"isLoading\" text=\"数据加载中...\" background=\"rgba(0, 0, 0, 0.5)\" />\r\n      <div v-for=\"column in columnList\" :key=\"column._id\" class=\"col-4 mb-4\">\r\n        <div class=\"card h-100 shadow-sm\">\r\n            <div class=\"card-body text-center\">\r\n                <img :src=\"column.avatar &&column.avatar.url\" class=\"rounded-circle border border-line w-25 my-3\" :alt=\"column.title\">\r\n                <h5 class=\"card-title\">{{column.title}}</h5>\r\n                <p class=\"card-text text-left\">{{column.description}}</p>\r\n                <a href=\"#\" class=\"btn btn-outline-primary\" @click.prevent=\"goDetailColumn(column._id)\">进入专栏</a>\r\n            </div>\r\n        </div>\r\n\r\n      </div>\r\n\r\n\r\n      \r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport {computed, defineComponent,PropType} from 'vue'\r\nimport {useRouter} from 'vue-router'\r\nimport store, {ColumnProps} from '@/store/index'\r\n\r\nimport Loader from '@/components/Loader/Loader.vue'\r\n\r\nexport default defineComponent({\r\n    name: 'ColumnList',\r\n    components: {\r\n        Loader\r\n    },\r\n    props: {\r\n        list: {\r\n            type: Array as PropType<ColumnProps[]>,\r\n            required: true\r\n        }\r\n    },\r\n    setup(props) {\r\n        const router = useRouter()\r\n        // props.list[0].id\r\n      \r\n        const goDetailColumn = (id:string) => {\r\n            console.log('进入详情',id);\r\n            \r\n            router.push({\r\n                path:'/columnDetail',\r\n                query: {\r\n                    id: id\r\n                }\r\n                // params: {\r\n                //     id: id\r\n                // }\r\n            })\r\n            \r\n        }\r\n        const columnList = computed(() => {\r\n            return props.list.map(column => {\r\n                if (!column.avatar) {\r\n                    column.avatar = require('@/assets/logo.png')\r\n                }\r\n                return column\r\n            })\r\n        })\r\n        const isLoading = computed(()=>store.state.isLoding)\r\n        return {\r\n            columnList,\r\n            goDetailColumn,\r\n            isLoading\r\n        }\r\n    }\r\n})\r\n</script>\r\n\r\n<style>\r\n\r\n</style>","/**\r\n * 获取token，并保存到本地，实现持久化\r\n */\r\nimport axios from 'axios'\r\nimport store from '@/store/index'\r\n\r\n// 设置接口的公共部分\r\naxios.defaults.baseURL = 'http://apis.imooc.com/api/'\r\nconst icode = '540164FDA60035F5' // 这是慕课网的跨域编码\r\n\r\n//请求拦截,在这里，我们设置请求参数，已经请求头等\r\naxios.interceptors.request.use(config => {\r\n    store.commit('setError',{status:false,message:''}) // 每次请求前，都需要先清除错误状态\r\n    if (config.method == 'get') {\r\n        config.params = {...config.params,icode: icode}\r\n    } else if (config.data instanceof FormData) { //如果是上传文件，添加到 FormData 中\r\n        config.data.append('icode', icode)\r\n    } else {\r\n        config.data = {...config.data,icode: icode} \r\n    }\r\n   \r\n    store.commit('setLoading',true)\r\n    return config\r\n})\r\n\r\naxios.interceptors.response.use(config => {\r\n    store.commit('setLoading',false)\r\n    return config\r\n},e => {\r\n    const {error} = e.response.data\r\n    store.commit('setError',{status:true,message:error})\r\n    store.commit('setLoading',false)\r\n    return Promise.reject(error)\r\n    \r\n})\r\nexport default axios","export const GET_COLUMNS = 'columns' // 获取专栏列表\r\n\r\nexport const SIGNUP = 'users' // 注册用户\r\n\r\nexport const POSTS = 'posts' // 文章 api","import axios from './request'\r\nimport {GET_COLUMNS,SIGNUP,POSTS} from './api'\r\nexport interface paramsProps  {\r\n    currentPage?:string ,\r\n    pageSize?:string,\r\n    id?: string\r\n}\r\n\r\nexport interface signupProps {\r\n    \r\n  email: string,\r\n  nickName: string,\r\n  password: string\r\n}\r\n\r\n// /api/columns/{id}/posts?currentPage={page}&pageSize={size}\r\n// 第一种请求方式，这样不太方便\r\n/* export const getColumns = ()=> {\r\n    return axios.get(GET_COLUMNS)\r\n} */\r\n\r\n// 第二种请求方式，可以配置参数\r\n// 发送请求, 获得专栏列表\r\nexport const getColumns = (param:paramsProps)=> {\r\n   const {currentPage = '1',pageSize = '10'} = param\r\n\r\n    return axios({\r\n        url: GET_COLUMNS,\r\n        method: 'get',\r\n        params: {\r\n            currentPage,\r\n            pageSize\r\n        }\r\n    })\r\n}\r\n\r\n// 获取专栏详情,获取单个专栏\r\nexport const getDetailColumn = (param:paramsProps) => {\r\n    const {currentPage = '1',pageSize = '10',id} = param\r\n    return axios({\r\n        url: `${GET_COLUMNS}/${id}`,\r\n        method:'get',\r\n        params: {\r\n            currentPage,\r\n            pageSize\r\n        }\r\n    })\r\n}\r\n\r\n// 获取专栏的文章列表\r\nexport const getPotList = (param:paramsProps) => {\r\n    const {currentPage = '1',pageSize = '10',id} = param\r\n    return axios({\r\n        url:`${GET_COLUMNS}/${id}/posts`,\r\n        method:'get',\r\n        params: {\r\n            currentPage,\r\n            pageSize\r\n        }\r\n    })\r\n}\r\n\r\nexport const signup = (param:signupProps) => {\r\n    return axios({\r\n        url: SIGNUP,\r\n        method: 'post',\r\n        data: param\r\n    })\r\n}\r\n\r\n// 创建文章\r\nexport const createPosts = (param:any) => {\r\n    return axios({\r\n        url:POSTS,\r\n        method: 'post',\r\n        data: param\r\n    })\r\n}","/**\r\n * 路由权限问题\r\n */\r\n\r\nimport {createStore,Commit} from 'vuex'\r\nimport {FunctionalComponent, PropType} from 'vue'\r\nimport {getColumns,getDetailColumn,getPotList} from '@/api/index'\r\n\r\nimport axios from '@/api/request'\r\n\r\nexport interface ResponseType<P> {\r\n    code: number,\r\n    msg: string,\r\n    data: P\r\n}\r\n\r\nexport interface GlobalErrorProps {\r\n    status: boolean,\r\n    message?: string\r\n}\r\n\r\nexport interface UserProps {\r\n    isLogin: boolean,\r\n    nickName?:string,\r\n    _id?:string,\r\n    column?: string,\r\n    email?:string,\r\n    avatar?: ImageProps;\r\n    description?: string;\r\n}\r\nexport interface ImageProps {\r\n    _id?: string,\r\n    url?:string,\r\n    createdAt?: string,\r\n    fitUrl?: string;\r\n}\r\nexport interface ColumnProps {\r\n    _id: string,\r\n    title: string,\r\n    avatar?: ImageProps,\r\n    description: string\r\n}\r\n\r\nexport interface PostProps {\r\n    _id: string,\r\n    title: string,\r\n    excerpt?:string, // 文章摘要\r\n    content?: string,\r\n    createdAt:string,\r\n    image?: ImageProps,\r\n    column?:string,\r\n    author?: string | UserProps,\r\n    isHTML?: boolean\r\n}\r\n\r\n\r\nexport interface GlobalDataProps {\r\n    error:GlobalErrorProps\r\n    columns: ColumnProps[],\r\n    posts: PostProps[],\r\n    user: UserProps,\r\n    enAbleCreate?: boolean,\r\n    currentId?: string,\r\n    isLoding: boolean,\r\n    token: string\r\n}\r\n\r\n// get请求的封装\r\nconst getAndCommit = async(url:string,mutationName:string,commit:Commit) => {\r\n    const {data} = await axios.get(url)\r\n    commit(mutationName,data)\r\n    return data\r\n}\r\n\r\n// post请求的封装\r\nconst postAndCommit = async(url:string,mutationName:string,commit:Commit,payload:any) => {\r\n    const {data} = await axios({\r\n        url:url,\r\n        method: 'post',\r\n        data: payload\r\n    })\r\n    commit(mutationName,data)\r\n    return data\r\n}\r\nconst columnsLocal = localStorage.getItem('columns')\r\nconst postListLocal = localStorage.getItem('postList')\r\n\r\nconst store = createStore <GlobalDataProps>({\r\n    state: {\r\n        error: {status:false},\r\n        columns: (columnsLocal&&JSON.parse(columnsLocal))||[]  ,\r\n        posts: (postListLocal&&JSON.parse(postListLocal))||[],\r\n        user: {isLogin: false},\r\n        enAbleCreate: true,\r\n        currentId: localStorage.getItem('currentId')||'',\r\n        isLoding: false,\r\n        token: localStorage.getItem('token') || ''\r\n\r\n    },\r\n    mutations: {\r\n        login(state) {\r\n            console.log('登录：',state);\r\n            \r\n            // state.user = {...state.user,isLogin:true,name: 'hmgdec'}\r\n        },\r\n        loginOut(state) {\r\n            state.user = {...state.user,isLogin:false}\r\n            localStorage.removeItem('token')\r\n            state.token = \"\"\r\n            delete axios.defaults.headers.common.Authorization\r\n        },\r\n        setUnAbleCreate(state,data) {\r\n            state.enAbleCreate = data\r\n        },\r\n        // 设置当前的columnId\r\n        setCurrentId(state,data) {\r\n            console.log('dataId:',data);\r\n            localStorage.setItem('currentId',data)\r\n            state.currentId = data\r\n        },\r\n\r\n        // 设置当前的posts数据 :PropType<PostProps>\r\n        setPostsData(state,data) {\r\n            state.posts = [data,...state.posts]\r\n        },\r\n\r\n        // 异步请求Columns列表\r\n        fetchColumnsMutation(state,rawData) {\r\n            state.columns = rawData.data.list\r\n            localStorage.setItem('columns',JSON.stringify(rawData.data.list))\r\n            \r\n        },\r\n        \r\n        // 异步请求DetailColumn专栏详情\r\n        fetchDetailColumnMutation(state,rawData) {\r\n            // 因为专栏详情只有一条，并且后端返回的是对象，所有我们需要放到数组中\r\n            state.columns = [rawData.data] \r\n        },\r\n        // 异步请求Post列表\r\n        fetchPostsMutation(state,rawData) {\r\n            const val = rawData.data.list\r\n            localStorage.setItem('postList',JSON.stringify(val))\r\n            state.posts = val\r\n        },\r\n\r\n        // 设置loding\r\n        setLoading(state,status) {\r\n            state.isLoding = status\r\n        },\r\n\r\n        // 错误的处理\r\n        setError(state,e:GlobalErrorProps) {\r\n            state.error = e\r\n        },\r\n\r\n        // 登录请求\r\n        fetchLoginMutation(state,rawData) {\r\n            const {token} = rawData.data\r\n            state.token = token\r\n            localStorage.setItem('token',token) // 把token缓存在本地里\r\n            axios.defaults.headers.common.Authorization = `Bearer ${token}`\r\n            \r\n        },\r\n\r\n        // 获取当前用户信息\r\n        fetchCurrentUserMutation(state,rawData) {\r\n            state.user = {isLogin:true,...rawData.data}\r\n        }\r\n\r\n    },\r\n    actions: {\r\n        // 获取Columns列表\r\n      async  fetchColumns(contex) {\r\n            try {\r\n                const {data} = await getColumns({})\r\n                const {commit} = contex\r\n                commit('fetchColumnsMutation',data)\r\n            } catch (error) {\r\n                new Error(error)\r\n            }\r\n        },\r\n\r\n        // DetailColumn专栏详情\r\n       async fetchDetailColumn(context,params) {\r\n\r\n            try {\r\n                const {commit} = context\r\n                const {data} = await getDetailColumn(params)\r\n                commit('fetchDetailColumnMutation',data)\r\n            } catch (error) {\r\n                new Error(error)\r\n            }\r\n\r\n        },\r\n\r\n        // 获取Post列表\r\n       async fetchPosts(context,params) {\r\n            try {\r\n                const {commit} = context\r\n                const {data}  = await  getPotList(params)\r\n                commit('fetchPostsMutation',data)\r\n            } catch (error) {\r\n                new Error(error)\r\n            }\r\n        },\r\n\r\n        // 登录请求\r\n        fetchLogin ({commit},payload) {\r\n          return  postAndCommit('user/login','fetchLoginMutation',commit,payload)\r\n        },\r\n        \r\n        // 获取用户信息 /user/current\r\n        featchCurrentUser ({commit}) {\r\n           return getAndCommit('user/current','fetchCurrentUserMutation',commit)\r\n        },\r\n\r\n        // 组合actions请求，先调用获取token的接口，然后再调用用户信息的接口\r\n        loginAndFeach({dispatch},loginData) {\r\n            return dispatch('fetchLogin',loginData).then(() => {\r\n                return dispatch('featchCurrentUser')\r\n            })\r\n        }\r\n    },\r\n    // 状态管理工具的 计算属性，方便在多个页面使用\r\n    getters: {\r\n        getColumnById:(state) => (id:string) => {\r\n            const val = state.columns.find(c => c._id == id)\r\n          return   val\r\n        },\r\n\r\n        getPostListById: (state) => (id: string) => {\r\n            \r\n            return state.posts.filter(c => c.column == id)\r\n        },\r\n\r\n        // 获取当前的Column的数据\r\n        getCurrentColumn: (state)=>  ()=> {\r\n            const val = state.columns.find((c:ColumnProps) => c._id == state.currentId)\r\n            if (val) {\r\n                return JSON.parse(JSON.stringify(val))\r\n            }\r\n            \r\n        },\r\n\r\n        // 获取文章详情\r\n        getCurrentPost: (state)=> (id: string)=> {\r\n            const val = state.posts.find(item => item._id == id)\r\n            console.log('columns:',state.columns);\r\n            console.log('详情：',val);\r\n            console.log('id:',id);\r\n            \r\n            return val\r\n            \r\n        }\r\n    }\r\n})\r\n\r\nexport default store","<template>\r\n    <teleport to=\"#loader\">\r\n        <div \r\n            class=\"d-flex justify-content-center align-items-center h-100 loading-container\"\r\n            :style=\"{background:background || ''}\"\r\n            >\r\n            <div class=\"loading-content\">\r\n                <div class=\"spinner-border \" :style=\"{color:color || ''}\" role=\"status\">\r\n                        <span class=\"sr-only visually-hidden\"></span>\r\n                </div>\r\n                <p  :style=\"{color:color || ''}\"  v-if=\"text\">{{text}}</p>\r\n            </div>\r\n        </div>\r\n    </teleport>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport {defineComponent,onUnmounted} from 'vue'\r\nexport default defineComponent({\r\nprops: {\r\n    text: {\r\n        type: String,\r\n        default: \"\"\r\n    },\r\n    background: {\r\n        type: String\r\n    },\r\n    color: {\r\n        type:String,\r\n        default: '#0d6efd'\r\n    }\r\n},\r\nsetup() {\r\n    const node = document.createElement('div')\r\n    node.id = \"loader\"\r\n    document.body.appendChild(node)\r\n\r\n    onUnmounted(() => {\r\n        document.body.removeChild(node)\r\n    })\r\n    return\r\n}\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n    .loading-container {\r\n        z-index: 100;\r\n        background: rgba(255, 255, 255, 0.5);\r\n        position: fixed;\r\n        width: 100%;\r\n        height: 100%;\r\n        top: 0;\r\n        left: 0;\r\n    }\r\n    .loading-content {\r\n        text-align: center;\r\n    }\r\n</style>","\r\nimport {defineComponent,onUnmounted} from 'vue'\r\nexport default defineComponent({\r\nprops: {\r\n    text: {\r\n        type: String,\r\n        default: \"\"\r\n    },\r\n    background: {\r\n        type: String\r\n    },\r\n    color: {\r\n        type:String,\r\n        default: '#0d6efd'\r\n    }\r\n},\r\nsetup() {\r\n    const node = document.createElement('div')\r\n    node.id = \"loader\"\r\n    document.body.appendChild(node)\r\n\r\n    onUnmounted(() => {\r\n        document.body.removeChild(node)\r\n    })\r\n    return\r\n}\r\n})\r\n","import { render } from \"./Loader.vue?vue&type=template&id=54296f1b&scoped=true\"\nimport script from \"./Loader.vue?vue&type=script&lang=ts\"\nexport * from \"./Loader.vue?vue&type=script&lang=ts\"\n\nimport \"./Loader.vue?vue&type=style&index=0&id=54296f1b&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-54296f1b\"\n\nexport default script","\r\nimport {computed, defineComponent,PropType} from 'vue'\r\nimport {useRouter} from 'vue-router'\r\nimport store, {ColumnProps} from '@/store/index'\r\n\r\nimport Loader from '@/components/Loader/Loader.vue'\r\n\r\nexport default defineComponent({\r\n    name: 'ColumnList',\r\n    components: {\r\n        Loader\r\n    },\r\n    props: {\r\n        list: {\r\n            type: Array as PropType<ColumnProps[]>,\r\n            required: true\r\n        }\r\n    },\r\n    setup(props) {\r\n        const router = useRouter()\r\n        // props.list[0].id\r\n      \r\n        const goDetailColumn = (id:string) => {\r\n            console.log('进入详情',id);\r\n            \r\n            router.push({\r\n                path:'/columnDetail',\r\n                query: {\r\n                    id: id\r\n                }\r\n                // params: {\r\n                //     id: id\r\n                // }\r\n            })\r\n            \r\n        }\r\n        const columnList = computed(() => {\r\n            return props.list.map(column => {\r\n                if (!column.avatar) {\r\n                    column.avatar = require('@/assets/logo.png')\r\n                }\r\n                return column\r\n            })\r\n        })\r\n        const isLoading = computed(()=>store.state.isLoding)\r\n        return {\r\n            columnList,\r\n            goDetailColumn,\r\n            isLoading\r\n        }\r\n    }\r\n})\r\n","import { render } from \"./ColumnList.vue?vue&type=template&id=4f211a22\"\nimport script from \"./ColumnList.vue?vue&type=script&lang=ts\"\nexport * from \"./ColumnList.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<template>\r\n  <div class=\"file-upload\">\r\n      <div class=\"file-upload-container\" @click.prevent=\"triggerUpload\" v-bind=\"$attrs\">\r\n          <slot v-if=\"fileStatus === 'loading'\" name=\"loading\">\r\n              <button class=\"btn btn-primary\" disabled>正在上传...</button>\r\n          </slot>\r\n          <slot v-else-if=\"fileStatus === 'sucess'\" name='uploaded' :uploadData=\"uploadData\">\r\n              <button class=\"btn btn-primary\">上传成功</button>\r\n          </slot>\r\n          <slot v-else-if=\"fileStatus === 'error'\" name='error'>\r\n              <button class=\"btn btn-primary\" >上传失败</button>\r\n          </slot>\r\n         \r\n          <slot v-else name=\"default\">\r\n              <button class=\"btn btn-primary\">上传文件</button>\r\n          </slot>\r\n          </div>\r\n      <input type=\"file\"\r\n       class=\"file-input d-none\"\r\n       ref=\"fileInput\"\r\n       @change=\"handleFileChange\">\r\n  </div>\r\n</template>\r\n\r\n<script lang='ts'>\r\n/* 上传文件，自定义样式 */\r\nimport {defineComponent,ref,PropType} from 'vue'\r\n\r\nimport axios from '@/api/request'\r\n\r\n// 定义上传的状态\r\ntype UploaderStatus = 'ready' | 'loading' | 'sucess' | 'error'\r\n\r\n// 自定义检查，是一个函数，返回的是布尔值\r\ntype checkFunction = (file: File) => boolean\r\n\r\nexport default defineComponent({\r\nprops: {\r\n    action: {\r\n        type:String,\r\n        required: true\r\n    },\r\n    /* 上传前的一系列检查 */\r\n    boforeUpload: {\r\n        type: Function as PropType<checkFunction>\r\n    }\r\n},\r\ninheritAttrs: false, //自定义样式或者属性不添加在根标签上\r\n// 定义要暴露的上传成功事件，上传失败事件\r\nemits: ['file-uploaded','file-uploaded-error'],\r\nsetup(props,context){\r\n\r\n    // 绑定ref,获得input元素的节点\r\n    const fileInput = ref<null | HTMLInputElement>(null)\r\n\r\n    // 定义返回出去的数据\r\n    const uploadData = ref()\r\n\r\n    \r\n    // 创建上传状态的响应式对象\r\n    const fileStatus = ref<UploaderStatus>('ready')\r\n\r\n    const triggerUpload  = () => {\r\n        //当input节点存在的时候，就触发点击事件\r\n        if (fileInput.value) {\r\n           fileInput.value.click() \r\n        }\r\n    }\r\n\r\n    // input 的change事件\r\n    const handleFileChange = ((e:Event) => {\r\n        // 获取里面的文件,这样是为了获得file属性\r\n        const currentTarget = e.target as HTMLInputElement\r\n        // 如果条件为真，说明已经选择了文件，可以上传\r\n        if (currentTarget.files) {\r\n            // 因为currentTarget.files不是一个数组，需要手动转换\r\n            const fiels = Array.from(currentTarget.files)\r\n\r\n            // 如果存在该属性，就做上传前的一系列检查\r\n            if (props.boforeUpload) {\r\n                const result = props.boforeUpload(fiels[0])\r\n\r\n                // 如果不满足条件，就不执行下面的程序\r\n                if (!result) {\r\n                    return\r\n                }\r\n            }\r\n            fileStatus.value = 'loading'\r\n            const formData = new FormData\r\n            \r\n            formData.append('file',fiels[0])\r\n            axios.post(props.action ,formData,{\r\n                headers: {\r\n                    'Content-Type': 'multipart/form-data'\r\n                }\r\n            }).then(res => {\r\n                fileStatus.value = 'sucess'\r\n                // 上传成功后，暴露成功事件\r\n                uploadData.value = res.data\r\n                context.emit('file-uploaded',res.data)\r\n                \r\n            }).catch(err => {\r\n                fileStatus.value = 'error'\r\n                context.emit('file-uploaded-error',{err})\r\n            }).finally(() => {\r\n                if (fileInput.value) {\r\n                    fileInput.value.value = ''\r\n                }\r\n            })\r\n\r\n        }\r\n    })\r\n\r\n\r\n    return {\r\n        fileInput,\r\n        triggerUpload,\r\n        handleFileChange,\r\n        fileStatus,\r\n        uploadData\r\n    }\r\n}\r\n})\r\n</script>\r\n\r\n<style>\r\n\r\n</style>","\r\n/* 上传文件，自定义样式 */\r\nimport {defineComponent,ref,PropType} from 'vue'\r\n\r\nimport axios from '@/api/request'\r\n\r\n// 定义上传的状态\r\ntype UploaderStatus = 'ready' | 'loading' | 'sucess' | 'error'\r\n\r\n// 自定义检查，是一个函数，返回的是布尔值\r\ntype checkFunction = (file: File) => boolean\r\n\r\nexport default defineComponent({\r\nprops: {\r\n    action: {\r\n        type:String,\r\n        required: true\r\n    },\r\n    /* 上传前的一系列检查 */\r\n    boforeUpload: {\r\n        type: Function as PropType<checkFunction>\r\n    }\r\n},\r\ninheritAttrs: false, //自定义样式或者属性不添加在根标签上\r\n// 定义要暴露的上传成功事件，上传失败事件\r\nemits: ['file-uploaded','file-uploaded-error'],\r\nsetup(props,context){\r\n\r\n    // 绑定ref,获得input元素的节点\r\n    const fileInput = ref<null | HTMLInputElement>(null)\r\n\r\n    // 定义返回出去的数据\r\n    const uploadData = ref()\r\n\r\n    \r\n    // 创建上传状态的响应式对象\r\n    const fileStatus = ref<UploaderStatus>('ready')\r\n\r\n    const triggerUpload  = () => {\r\n        //当input节点存在的时候，就触发点击事件\r\n        if (fileInput.value) {\r\n           fileInput.value.click() \r\n        }\r\n    }\r\n\r\n    // input 的change事件\r\n    const handleFileChange = ((e:Event) => {\r\n        // 获取里面的文件,这样是为了获得file属性\r\n        const currentTarget = e.target as HTMLInputElement\r\n        // 如果条件为真，说明已经选择了文件，可以上传\r\n        if (currentTarget.files) {\r\n            // 因为currentTarget.files不是一个数组，需要手动转换\r\n            const fiels = Array.from(currentTarget.files)\r\n\r\n            // 如果存在该属性，就做上传前的一系列检查\r\n            if (props.boforeUpload) {\r\n                const result = props.boforeUpload(fiels[0])\r\n\r\n                // 如果不满足条件，就不执行下面的程序\r\n                if (!result) {\r\n                    return\r\n                }\r\n            }\r\n            fileStatus.value = 'loading'\r\n            const formData = new FormData\r\n            \r\n            formData.append('file',fiels[0])\r\n            axios.post(props.action ,formData,{\r\n                headers: {\r\n                    'Content-Type': 'multipart/form-data'\r\n                }\r\n            }).then(res => {\r\n                fileStatus.value = 'sucess'\r\n                // 上传成功后，暴露成功事件\r\n                uploadData.value = res.data\r\n                context.emit('file-uploaded',res.data)\r\n                \r\n            }).catch(err => {\r\n                fileStatus.value = 'error'\r\n                context.emit('file-uploaded-error',{err})\r\n            }).finally(() => {\r\n                if (fileInput.value) {\r\n                    fileInput.value.value = ''\r\n                }\r\n            })\r\n\r\n        }\r\n    })\r\n\r\n\r\n    return {\r\n        fileInput,\r\n        triggerUpload,\r\n        handleFileChange,\r\n        fileStatus,\r\n        uploadData\r\n    }\r\n}\r\n})\r\n","import { render } from \"./Uploader.vue?vue&type=template&id=b9826336\"\nimport script from \"./Uploader.vue?vue&type=script&lang=ts\"\nexport * from \"./Uploader.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<template>\r\n  <teleport to=\"#message\">\r\n    <div class=\"alert message-info fixed-top w-50 mx-auto d-flex justify-content-between mt-2\" \r\n    :class=\"classOBject\" v-if=\"isVisible\">\r\n        <span>{{message}}</span>\r\n        <button type=\"button\" class=\"btn-close\" @click.prevent=\"hide\" aria-label=\"Close\"></button>\r\n    </div>\r\n  </teleport>\r\n</template>\r\n\r\n<script lang='ts'>\r\nexport type MessageType = 'success' | 'error' | 'default'\r\nimport {defineComponent,PropType,ref} from 'vue'\r\nimport useDOMCreate from '@/hooks/useDOMCreate'\r\nexport default defineComponent({\r\n    props: {\r\n        message: String,\r\n        msgType: {\r\n            type:String as PropType <MessageType>,\r\n            default: 'default'\r\n        }\r\n    },\r\n    emits: ['close-message'],\r\n    setup(props,context) {\r\n        useDOMCreate('message')\r\n        const isVisible = ref(true) // 定义是否显示\r\n        const classOBject = {\r\n            'alert-success': props.msgType === 'success',\r\n            'alert-danger': props.msgType === 'error',\r\n            'alert-primary': props.msgType === 'default'\r\n        }\r\n        const hide = () => {\r\n            isVisible.value = false\r\n            context.emit('close-message',true)\r\n        }\r\n\r\n        return {\r\n            isVisible,\r\n            classOBject,\r\n            hide\r\n        }\r\n    }\r\n})\r\n</script>\r\n\r\n<style>\r\n\r\n</style> ","\r\n/* 使用该函数，用于同意添加节点和销毁节点 */\r\nimport {onUnmounted} from 'vue'\r\nfunction useDOMCreate(nodeId:string) {\r\n    const node = document.createElement('div')\r\n    node.id = nodeId\r\n    document.body.appendChild(node)\r\n\r\n    onUnmounted(() => {\r\n        document.body.removeChild(node)\r\n    })\r\n}\r\n\r\nexport default useDOMCreate","\r\nexport type MessageType = 'success' | 'error' | 'default'\r\nimport {defineComponent,PropType,ref} from 'vue'\r\nimport useDOMCreate from '@/hooks/useDOMCreate'\r\nexport default defineComponent({\r\n    props: {\r\n        message: String,\r\n        msgType: {\r\n            type:String as PropType <MessageType>,\r\n            default: 'default'\r\n        }\r\n    },\r\n    emits: ['close-message'],\r\n    setup(props,context) {\r\n        useDOMCreate('message')\r\n        const isVisible = ref(true) // 定义是否显示\r\n        const classOBject = {\r\n            'alert-success': props.msgType === 'success',\r\n            'alert-danger': props.msgType === 'error',\r\n            'alert-primary': props.msgType === 'default'\r\n        }\r\n        const hide = () => {\r\n            isVisible.value = false\r\n            context.emit('close-message',true)\r\n        }\r\n\r\n        return {\r\n            isVisible,\r\n            classOBject,\r\n            hide\r\n        }\r\n    }\r\n})\r\n","import { render } from \"./Message.vue?vue&type=template&id=3543fab6\"\nimport script from \"./Message.vue?vue&type=script&lang=ts\"\nexport * from \"./Message.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","import { createApp } from 'vue'\r\nimport Message from '@/components/Message/Message.vue'\r\ntype MessageType = 'success' | 'error' | 'default'\r\nconst createMessage = (message:string,msgType:MessageType,timeout = 2000) => {\r\n    // 创建节点的实例\r\n    const messageInstance = createApp(Message,{\r\n        message,\r\n        msgType\r\n    })\r\n\r\n    // 创建节点\r\n    const mountNode = document.createElement('div')\r\n    document.body.appendChild(mountNode)\r\n    messageInstance.mount(mountNode) // 挂载\r\n\r\n    // 隔一段时间，自动清除\r\n    setTimeout(() => {\r\n        // messageInstance.unmount(mountNode) // 老的版本是需要传递参数的\r\n        messageInstance.unmount() // 新的版本不需要传递参数\r\n        document.body.removeChild(mountNode)\r\n    },timeout)\r\n    \r\n}\r\n\r\nexport default createMessage","\r\n/* 使用上传文件，自定义模板 */\r\nimport {defineComponent,computed,onMounted} from 'vue'\r\nimport ColumnList from '@/components/ColumnList/ColumnList.vue'\r\n\r\nimport {useStore} from 'vuex'\r\nimport {GlobalDataProps,ResponseType,ImageProps} from '@/store/index'\r\n\r\nimport Uploader from '@/components/Uploader/Uploader.vue'\r\n\r\nimport createMessage from '@/hooks/createMessage'\r\n\r\nexport default defineComponent({\r\n  components: {\r\n    ColumnList,\r\n    Uploader\r\n  },\r\n  setup(){\r\n    // 为了能够更好的提示，我们这里使用泛型\r\n    const store = useStore<GlobalDataProps>()\r\n\r\n    onMounted(() => {\r\n      // 经过此方式，把请求到的数据赋值给columns\r\n      store.dispatch('fetchColumns')\r\n    })\r\n   // 然后\r\n    const list = computed(()=>  store.state.columns)\r\n\r\n    // 做上传前的一系列检查\r\n    const boforeUpload = (file:File) => {\r\n      const isPng = file.type == 'image/png'\r\n      if (!isPng) {\r\n        createMessage('上传文件格式不是png','error')\r\n      }\r\n      return isPng\r\n    }\r\n\r\n    // 上传成功\r\n    const onFileUploaded = (rawData:ResponseType<ImageProps>) => {\r\n      console.log('上传成功了：',rawData);\r\n      \r\n      createMessage(`上传图片ID ${rawData.data._id}`,'success')\r\n    }\r\n    // 上传失败\r\n    const onfileUploadedError = (err:ResponseType<ImageProps>) => {\r\n      console.log('err',err);\r\n      const msg = err.msg || '上传路径错误'\r\n      createMessage(`上传文件 ${msg}`,'error')\r\n      \r\n    }\r\n    return {\r\n      testData:list,\r\n      boforeUpload,\r\n      onFileUploaded,\r\n      onfileUploadedError\r\n    }\r\n  }\r\n})\r\n","import { render } from \"./index.vue?vue&type=template&id=57beea31\"\nimport script from \"./index.vue?vue&type=script&lang=ts\"\nexport * from \"./index.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<template>\r\n  <div>\r\n    <!-- 采用标签的形式 -->\r\n     <!-- <message msgType=\"error\" v-if=\"errorMeg.status\"  :message=\"errorMeg.message\"></message> -->\r\n     <Loader v-if=\"isLoading\" text=\"数据加载中...\" background=\"rgba(0, 0, 0, 0.5)\" />\r\n      <Form></Form>\r\n  </div>\r\n</template>\r\n\r\n<script lang='ts'>\r\n/* 登录页面加loading */\r\nimport {defineComponent,computed,watch} from 'vue'\r\nimport Form from '@/components/form/Form.vue'\r\nimport store from '@/store/index'\r\n// import Message  from '@/components/Message/Message.vue' // 采用标签的形式\r\nimport createMessage from '@/hooks/createMessage' // 采用函数调用的形式\r\nimport Loader from '@/components/Loader/Loader.vue'\r\nexport default defineComponent({\r\n  components: {\r\n    Form,\r\n    Loader,\r\n    // Message\r\n  },\r\n  setup(props) {\r\n     const isLoading = computed(()=>store.state.isLoding)\r\n     const errorMeg = computed(() => store.state.error)\r\n\r\n     watch(()=>errorMeg.value.status,()=> {\r\n       const {message,status} = errorMeg.value\r\n       if (message && status) {\r\n         createMessage(message,'error')\r\n       } \r\n     })\r\n     return {\r\n       isLoading,\r\n       errorMeg\r\n     }\r\n  }\r\n})\r\n</script>\r\n\r\n<style>\r\n\r\n</style>","<template>\r\n  <validate-form @form-submit=\"onFormsubmit\">\r\n    <div class=\"mb-3\">\r\n        <label for=\"exampleInputEmail0\" class=\"form-label\">邮箱地址:</label>\r\n        <validate-input ref=\"inputRef\" :rules=\"emailRules\" v-model=\"emailValue\" id=\"exampleInputEmail0\" type=\"text\" placeholder=\"请输入邮箱地址\"></validate-input>\r\n    </div>\r\n  \r\n  <div class=\"mb-3\">\r\n    <label for=\"exampleInputEmail1\" class=\"form-label\">密码</label>\r\n     <validate-input :rules=\"passwodrRules\" id=\"exampleInputEmail1\" v-model=\"passwordValue\" type=\"password\" placeholder=\"请输入密码\"></validate-input>\r\n  </div>\r\n\r\n  <!-- <template v-slot:submit>\r\n      <span class=\"btn btn-danger\">submit</span>\r\n  </template> -->\r\n\r\n  <!-- 具名插槽的缩写 -->\r\n  <template #submit>\r\n      <span class=\"btn btn-danger\">submit</span>\r\n  </template>\r\n  \r\n</validate-form>\r\n</template>\r\n\r\n<script lang='ts'>\r\n/* 使用store 触发store里面的函数 */\r\n/* 登录调用接口 获取token并保存 */\r\nimport {useStore} from 'vuex'\r\n\r\nimport {defineComponent,reactive,ref,computed} from 'vue'\r\nimport {useRouter} from 'vue-router'\r\nimport validateInput,{RuleProps} from '../validateInput/validateInput.vue'\r\nimport ValidateForm from '../ValidateForm/ValidateForm.vue'\r\nimport createMessage from '@/hooks/createMessage' // 采用函数调用的形式\r\nexport default defineComponent({\r\n    components:{\r\n        validateInput,\r\n        ValidateForm\r\n    },\r\n    setup() {\r\n    //    const  signupDataJson = localStorage.getItem('signupData')\r\n      \r\n    //    let email = signupDataJson\r\n       let email = 'hmg@qq.com'\r\n       let password = '111111'\r\n        const emailValue = ref(email)\r\n        const passwordValue = ref(password)\r\n        const inputRef = ref<any>('')\r\n        const emailRules:RuleProps = [\r\n            {type: 'required',message: '邮箱地址不能为空！！！'},\r\n            {type: 'email',message: '请输入正确的邮箱！！！'}\r\n        ]\r\n        const passwodrRules:RuleProps = [\r\n            {type: 'required',message: '请输入密码！！！'},\r\n        ]\r\n        const emailRef = reactive({\r\n            val: '',\r\n            error: false,\r\n            message: ''\r\n        })\r\n\r\n        const router = useRouter()\r\n        const store = useStore()\r\n\r\n        const onFormsubmit = (result: boolean)=> {\r\n            if (result) {\r\n                let payload = {\r\n                    email: emailValue.value,\r\n                    password: passwordValue.value\r\n                }\r\n                /* store.dispatch('fetchLogin',payload).then(data => {\r\n                    console.log('登录数据：',data);\r\n                     router.push('/')\r\n                    \r\n                }) */\r\n                store.dispatch('loginAndFeach',payload).then(data => {\r\n                     createMessage('2秒后跳转首页','success')\r\n                    console.log('登录数据：',data);\r\n                    // localStorage.removeItem('signupData')\r\n                    setTimeout(()=> {\r\n\r\n                        router.push('/')\r\n                    },2000)\r\n                    \r\n                }).catch(error => {\r\n                    console.log(error);\r\n                    \r\n                })\r\n                // loginAndFeach\r\n            }\r\n            \r\n        }\r\n       \r\n        return {\r\n            emailRef,\r\n            emailRules,\r\n            passwodrRules,\r\n            emailValue,\r\n            passwordValue,\r\n            onFormsubmit,\r\n            inputRef\r\n        }\r\n    }\r\n})\r\n</script>\r\n\r\n<style>\r\n\r\n</style>","<template>\r\n <div class=\"validate-input-container pb-3\">\r\n     <input \r\n        v-if=\"tag !== 'textarea'\"\r\n        class=\"form-control\"\r\n        :class=\"{'is-invalid':inputRef.error}\"\r\n        :value=\"inputRef.val\"\r\n        @input=\"updateValue\"\r\n        @blur=\"validateInput\"\r\n        v-bind=\"$attrs\"\r\n        > \r\n        <textarea\r\n            v-else\r\n            class=\"form-control\"\r\n            :class=\"{'is-invalid':inputRef.error}\"\r\n            :value=\"inputRef.val\"\r\n            @input=\"updateValue\"\r\n            @blur=\"validateInput\"\r\n            v-bind=\"$attrs\"\r\n        >\r\n        </textarea>\r\n        <div class='invalid-feedback' v-if=\"inputRef.error\">{{inputRef.message}}</div>\r\n </div>\r\n</template>\r\n\r\n<script lang='ts'>\r\n/* 新增注册的校验规则 */\r\nimport {defineComponent,PropType,reactive,onMounted} from 'vue'\r\nimport {emitter} from '../ValidateForm/ValidateForm.vue'\r\ninterface emailProps {\r\n    type: 'required' | 'email' | 'custom' | 'passwordLen',\r\n    message: string,\r\n    validator?: () => boolean\r\n}\r\nexport type TagType = 'input' | 'textarea'\r\n\r\nexport type RuleProps = emailProps[]\r\nexport default defineComponent({\r\n    props: {\r\n        rules: Array as PropType<RuleProps>,\r\n        modelValue: String, // 支持双向绑定\r\n        tag: String as PropType<TagType>\r\n    },\r\n    inheritAttrs: false, //禁用 Attribute 继承\r\n    setup(props,context) {\r\n        const emailReg = /^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\\.[a-zA-Z0-9_-]+)+$/\r\n        const inputRef = reactive({\r\n            val: props.modelValue ||'',\r\n            error: false,\r\n            message: ''\r\n        })\r\n\r\n        const validateInput = ()=> {\r\n            if(props.rules) {\r\n             \r\n                const allPassed = props.rules.every(rule => {\r\n                    let passed = true;\r\n                    inputRef.message = rule.message\r\n                    switch (rule.type) {\r\n                        case 'required':\r\n                           passed = inputRef.val.trim() != ''\r\n                            break;\r\n\r\n                        case 'email':\r\n                            passed = emailReg.test(inputRef.val)\r\n                            break;\r\n                        case 'passwordLen':\r\n                            passed = inputRef.val.trim().length >= 6\r\n                            break\r\n                        case 'custom':\r\n                            passed = rule.validator ? rule.validator() : true\r\n                            break;\r\n                        default:\r\n                            break;\r\n                    }\r\n                    return passed\r\n                })\r\n                inputRef.error = !allPassed\r\n                return allPassed\r\n            }\r\n            return true\r\n        }\r\n        const updateValue = (e:KeyboardEvent) => {\r\n            let targetValue = (e.target as HTMLInputElement).value\r\n            inputRef.val = targetValue\r\n            context.emit('update:modelValue',targetValue)\r\n        }\r\n\r\n        onMounted(() => {\r\n            emitter.emit('form-item-created',validateInput)\r\n        })\r\n       \r\n        return {\r\n           inputRef,\r\n           validateInput,\r\n           updateValue\r\n        }\r\n    }\r\n})\r\n</script>\r\n\r\n<style>\r\n\r\n</style>","<template>\r\n    <form class=\"validate-form-container\">\r\n        <!-- 默认插槽 -->\r\n        <slot name=\"default\"></slot>\r\n        <!-- 阻止默认行为 -->\r\n        <div class=\"submit-area\" @click.prevent=\"submitForm\">\r\n            <!-- 具名插槽 -->\r\n            <slot name=\"submit\">\r\n                <button type=\"submit\" class=\"btn btn-primary\">提交</button>\r\n            </slot>\r\n        </div>\r\n    </form>\r\n</template>\r\n\r\n<script lang='ts'>\r\nimport {defineComponent,reactive,ref,onUnmounted} from 'vue'\r\n// 引入mitt库，并调用mitt函数\r\nimport mitt from 'mitt'\r\nexport const emitter = mitt()\r\n// 定义错误函数的类型\r\ntype ValidateFun = ()=> boolean\r\nexport default defineComponent({\r\n    components:{\r\n    },\r\n    // 暴露事件，因为不需要数据的校验，可以使用数组的方式\r\n    emits: ['form-submit'],\r\n    setup(props,context) {\r\n        // 定义错误信息，因为有多个错误信息，采用数组存放\r\n       let funArr:ValidateFun[] = []\r\n       const submitForm = () => {\r\n           console.log(funArr.map(func => func()))\r\n          const result = funArr.map(func => func()).every(result => result)\r\n          context.emit('form-submit',result)\r\n       }\r\n       \r\n       const callback = (func?:ValidateFun) => {\r\n           console.log('监听：',func);\r\n           if (func) {\r\n               funArr.push(func)\r\n           }\r\n       }\r\n\r\n        emitter.on('form-item-created',callback)\r\n        onUnmounted(() => {\r\n            emitter.off('form-item-created',callback)\r\n            funArr = []\r\n        })\r\n\r\n        return {\r\n            submitForm\r\n        }\r\n    }\r\n})\r\n</script>\r\n\r\n<style>\r\n\r\n</style>","\r\nimport {defineComponent,reactive,ref,onUnmounted} from 'vue'\r\n// 引入mitt库，并调用mitt函数\r\nimport mitt from 'mitt'\r\nexport const emitter = mitt()\r\n// 定义错误函数的类型\r\ntype ValidateFun = ()=> boolean\r\nexport default defineComponent({\r\n    components:{\r\n    },\r\n    // 暴露事件，因为不需要数据的校验，可以使用数组的方式\r\n    emits: ['form-submit'],\r\n    setup(props,context) {\r\n        // 定义错误信息，因为有多个错误信息，采用数组存放\r\n       let funArr:ValidateFun[] = []\r\n       const submitForm = () => {\r\n           console.log(funArr.map(func => func()))\r\n          const result = funArr.map(func => func()).every(result => result)\r\n          context.emit('form-submit',result)\r\n       }\r\n       \r\n       const callback = (func?:ValidateFun) => {\r\n           console.log('监听：',func);\r\n           if (func) {\r\n               funArr.push(func)\r\n           }\r\n       }\r\n\r\n        emitter.on('form-item-created',callback)\r\n        onUnmounted(() => {\r\n            emitter.off('form-item-created',callback)\r\n            funArr = []\r\n        })\r\n\r\n        return {\r\n            submitForm\r\n        }\r\n    }\r\n})\r\n","import { render } from \"./ValidateForm.vue?vue&type=template&id=496701ee\"\nimport script from \"./ValidateForm.vue?vue&type=script&lang=ts\"\nexport * from \"./ValidateForm.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","\r\n/* 新增注册的校验规则 */\r\nimport {defineComponent,PropType,reactive,onMounted} from 'vue'\r\nimport {emitter} from '../ValidateForm/ValidateForm.vue'\r\ninterface emailProps {\r\n    type: 'required' | 'email' | 'custom' | 'passwordLen',\r\n    message: string,\r\n    validator?: () => boolean\r\n}\r\nexport type TagType = 'input' | 'textarea'\r\n\r\nexport type RuleProps = emailProps[]\r\nexport default defineComponent({\r\n    props: {\r\n        rules: Array as PropType<RuleProps>,\r\n        modelValue: String, // 支持双向绑定\r\n        tag: String as PropType<TagType>\r\n    },\r\n    inheritAttrs: false, //禁用 Attribute 继承\r\n    setup(props,context) {\r\n        const emailReg = /^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\\.[a-zA-Z0-9_-]+)+$/\r\n        const inputRef = reactive({\r\n            val: props.modelValue ||'',\r\n            error: false,\r\n            message: ''\r\n        })\r\n\r\n        const validateInput = ()=> {\r\n            if(props.rules) {\r\n             \r\n                const allPassed = props.rules.every(rule => {\r\n                    let passed = true;\r\n                    inputRef.message = rule.message\r\n                    switch (rule.type) {\r\n                        case 'required':\r\n                           passed = inputRef.val.trim() != ''\r\n                            break;\r\n\r\n                        case 'email':\r\n                            passed = emailReg.test(inputRef.val)\r\n                            break;\r\n                        case 'passwordLen':\r\n                            passed = inputRef.val.trim().length >= 6\r\n                            break\r\n                        case 'custom':\r\n                            passed = rule.validator ? rule.validator() : true\r\n                            break;\r\n                        default:\r\n                            break;\r\n                    }\r\n                    return passed\r\n                })\r\n                inputRef.error = !allPassed\r\n                return allPassed\r\n            }\r\n            return true\r\n        }\r\n        const updateValue = (e:KeyboardEvent) => {\r\n            let targetValue = (e.target as HTMLInputElement).value\r\n            inputRef.val = targetValue\r\n            context.emit('update:modelValue',targetValue)\r\n        }\r\n\r\n        onMounted(() => {\r\n            emitter.emit('form-item-created',validateInput)\r\n        })\r\n       \r\n        return {\r\n           inputRef,\r\n           validateInput,\r\n           updateValue\r\n        }\r\n    }\r\n})\r\n","import { render } from \"./validateInput.vue?vue&type=template&id=7b6242dc\"\nimport script from \"./validateInput.vue?vue&type=script&lang=ts\"\nexport * from \"./validateInput.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","\r\n/* 使用store 触发store里面的函数 */\r\n/* 登录调用接口 获取token并保存 */\r\nimport {useStore} from 'vuex'\r\n\r\nimport {defineComponent,reactive,ref,computed} from 'vue'\r\nimport {useRouter} from 'vue-router'\r\nimport validateInput,{RuleProps} from '../validateInput/validateInput.vue'\r\nimport ValidateForm from '../ValidateForm/ValidateForm.vue'\r\nimport createMessage from '@/hooks/createMessage' // 采用函数调用的形式\r\nexport default defineComponent({\r\n    components:{\r\n        validateInput,\r\n        ValidateForm\r\n    },\r\n    setup() {\r\n    //    const  signupDataJson = localStorage.getItem('signupData')\r\n      \r\n    //    let email = signupDataJson\r\n       let email = 'hmg@qq.com'\r\n       let password = '111111'\r\n        const emailValue = ref(email)\r\n        const passwordValue = ref(password)\r\n        const inputRef = ref<any>('')\r\n        const emailRules:RuleProps = [\r\n            {type: 'required',message: '邮箱地址不能为空！！！'},\r\n            {type: 'email',message: '请输入正确的邮箱！！！'}\r\n        ]\r\n        const passwodrRules:RuleProps = [\r\n            {type: 'required',message: '请输入密码！！！'},\r\n        ]\r\n        const emailRef = reactive({\r\n            val: '',\r\n            error: false,\r\n            message: ''\r\n        })\r\n\r\n        const router = useRouter()\r\n        const store = useStore()\r\n\r\n        const onFormsubmit = (result: boolean)=> {\r\n            if (result) {\r\n                let payload = {\r\n                    email: emailValue.value,\r\n                    password: passwordValue.value\r\n                }\r\n                /* store.dispatch('fetchLogin',payload).then(data => {\r\n                    console.log('登录数据：',data);\r\n                     router.push('/')\r\n                    \r\n                }) */\r\n                store.dispatch('loginAndFeach',payload).then(data => {\r\n                     createMessage('2秒后跳转首页','success')\r\n                    console.log('登录数据：',data);\r\n                    // localStorage.removeItem('signupData')\r\n                    setTimeout(()=> {\r\n\r\n                        router.push('/')\r\n                    },2000)\r\n                    \r\n                }).catch(error => {\r\n                    console.log(error);\r\n                    \r\n                })\r\n                // loginAndFeach\r\n            }\r\n            \r\n        }\r\n       \r\n        return {\r\n            emailRef,\r\n            emailRules,\r\n            passwodrRules,\r\n            emailValue,\r\n            passwordValue,\r\n            onFormsubmit,\r\n            inputRef\r\n        }\r\n    }\r\n})\r\n","import { render } from \"./Form.vue?vue&type=template&id=175a0cb6\"\nimport script from \"./Form.vue?vue&type=script&lang=ts\"\nexport * from \"./Form.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","\r\n/* 登录页面加loading */\r\nimport {defineComponent,computed,watch} from 'vue'\r\nimport Form from '@/components/form/Form.vue'\r\nimport store from '@/store/index'\r\n// import Message  from '@/components/Message/Message.vue' // 采用标签的形式\r\nimport createMessage from '@/hooks/createMessage' // 采用函数调用的形式\r\nimport Loader from '@/components/Loader/Loader.vue'\r\nexport default defineComponent({\r\n  components: {\r\n    Form,\r\n    Loader,\r\n    // Message\r\n  },\r\n  setup(props) {\r\n     const isLoading = computed(()=>store.state.isLoding)\r\n     const errorMeg = computed(() => store.state.error)\r\n\r\n     watch(()=>errorMeg.value.status,()=> {\r\n       const {message,status} = errorMeg.value\r\n       if (message && status) {\r\n         createMessage(message,'error')\r\n       } \r\n     })\r\n     return {\r\n       isLoading,\r\n       errorMeg\r\n     }\r\n  }\r\n})\r\n","import { render } from \"./index.vue?vue&type=template&id=17b4c9b8\"\nimport script from \"./index.vue?vue&type=script&lang=ts\"\nexport * from \"./index.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<template>\r\n  <div>\r\n      <ul class=\"nav\">\r\n        <li class=\"nav-item\">\r\n            <router-link :to=\"{name: 'useRoute1',params: {id: 1}}\" class=\"nav-link active\" href=\"#\">《1》route-link跳转方式，以对象参数的形式传参</router-link>\r\n        </li>\r\n         <li class=\"nav-item\">\r\n            <router-link :to=\"`/useRoute1/2`\" class=\"nav-link active\" href=\"#\">《2》route-link跳转方式，以模板字符串的形式传参</router-link>\r\n        </li>\r\n        <li class=\"nav-item\">\r\n            <a class=\"nav-link\" @click.prevent=\"goUseRoute2\" href=\"#\">《3》使用JavaScript跳转方式</a>\r\n        </li>\r\n      </ul>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport {defineComponent} from 'vue'\r\nimport {useRouter} from 'vue-router'\r\nexport default defineComponent({\r\n    components: {\r\n\r\n    },\r\n    setup() {\r\n        const router = useRouter()\r\n        const goUseRoute2 = ()=> {\r\n            router.push({\r\n                name: 'useRoute2',\r\n                params: {\r\n                    id: 3\r\n                }\r\n            })\r\n        }\r\n        return {\r\n            goUseRoute2\r\n        }\r\n    }\r\n})\r\n</script>\r\n\r\n<style>\r\n\r\n</style>","\r\nimport {defineComponent} from 'vue'\r\nimport {useRouter} from 'vue-router'\r\nexport default defineComponent({\r\n    components: {\r\n\r\n    },\r\n    setup() {\r\n        const router = useRouter()\r\n        const goUseRoute2 = ()=> {\r\n            router.push({\r\n                name: 'useRoute2',\r\n                params: {\r\n                    id: 3\r\n                }\r\n            })\r\n        }\r\n        return {\r\n            goUseRoute2\r\n        }\r\n    }\r\n})\r\n","import { render } from \"./index.vue?vue&type=template&id=2c7c43b4\"\nimport script from \"./index.vue?vue&type=script&lang=ts\"\nexport * from \"./index.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<template>\r\n  <div>\r\n      <pre>{{route}}</pre>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {defineComponent} from 'vue'\r\nimport {useRoute} from 'vue-router'\r\nexport default defineComponent({\r\n    components: {\r\n\r\n    },\r\n    setup() {\r\n        const route = useRoute()\r\n        return {\r\n            route\r\n        }\r\n    }\r\n})\r\n</script>\r\n\r\n<style>\r\n\r\n</style>","import { render } from \"./index1.vue?vue&type=template&id=ae5157f8\"\nimport script from \"./index1.vue?vue&type=script&lang=js\"\nexport * from \"./index1.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<template>\r\n  <div>\r\n      <pre>{{route}}</pre>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {defineComponent} from 'vue'\r\nimport {useRoute} from 'vue-router'\r\nexport default defineComponent({\r\n    components: {\r\n\r\n    },\r\n    setup() {\r\n        const route = useRoute()\r\n        return {\r\n            route\r\n        }\r\n    }\r\n})\r\n</script>\r\n\r\n<style>\r\n\r\n</style>","import { render } from \"./index2.vue?vue&type=template&id=c9977576\"\nimport script from \"./index2.vue?vue&type=script&lang=js\"\nexport * from \"./index2.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<template>\r\n  <div class=\"column-detail-page w-75 mx-auto\">\r\n    <div class=\"column-info row mb-4 border-bottom pb-4 align-items-center\" v-if=\"columnScale\">\r\n      <div class=\"col-3 text-center\">\r\n        <img :src=\"columnScale.avatar && columnScale.avatar.url\" :alt=\"columnScale.title\" class=\"rounded-circle border\">\r\n      </div>\r\n      <div class=\"col-9\">\r\n        <h4>{{columnScale.title}}</h4>\r\n        <p class=\"text-muted\">{{columnScale.description}}</p>\r\n      </div>\r\n    </div>\r\n    <post-list :currentId=\"currentId\" :list=\"list\"></post-list>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\n/* 使用store异步加载数据 */\r\nimport { defineComponent, onMounted,computed } from 'vue'\r\nimport { useRoute } from 'vue-router'\r\n\r\nimport {useStore} from 'vuex'\r\nimport {GlobalDataProps,ColumnProps} from '@/store/index'\r\nimport PostList from '@/components/PostList/PostList.vue'\r\n\r\nexport default defineComponent({\r\n  components: {\r\n    PostList\r\n  },\r\n  setup() {\r\n    const route = useRoute()\r\n    const store = useStore<GlobalDataProps>()\r\n    const currentId = route.query.id\r\n    onMounted(() => {\r\n    store.dispatch('fetchDetailColumn',{id:currentId})\r\n    store.dispatch('fetchPosts',{id:currentId})\r\n\r\n\r\n    })\r\n\r\n    \r\n\r\n    \r\n    // const column = computed(()=> store.state.columns.find(c => String(c.id) == currentId))\r\n\r\n    // const list = computed(()=> store.state.posts.filter(item => {\r\n    //   return String(item.columnId) == currentId\r\n    // }))\r\n\r\n    // 采用 store 的getters方式\r\n    // const column  = store.getters.getColumnById(currentId) as ColumnProps\r\n    // console.log('详情：',column);\r\n\r\n    const columnScale = computed(() => {\r\n      // 获取的column数据必须是在计算属性里面，不能放在计算属性外，否则提示错误\r\n        const column  = store.getters.getColumnById(currentId) as ColumnProps\r\n        if (column.avatar) {\r\n          column.avatar.url = column.avatar.url + \"?x-oss-process=image/resize,m_pad,h_50,w_50,color_FF0000\"\r\n        }\r\n        return column\r\n    }) \r\n\r\n    \r\n    \r\n    // const list  = store.getters.getPostListById(currentId) // 这里是原来的获取数据的方式\r\n    const list = computed(()=> store.state.posts) //这是后来获取数据的方式\r\n  \r\n    return {\r\n      // column,\r\n      list,\r\n      currentId: Number(currentId),\r\n      columnScale\r\n    }\r\n  }\r\n})\r\n</script>\r\n<style scoped>\r\n  .text-center img {\r\n    width: 100px;\r\n    height: 100px;\r\n  }\r\n</style>\r\n","<template >\r\n  <div class=\"post-list\" v-if=\"PostList\">\r\n    <article v-for=\"post in PostList\" v-bind:key=\"post._id\" class=\"card mb-3 shadow-sm\">\r\n      <div class=\"card-body\">\r\n        <a  href=\"#\" @click.prevent=\"goPostDetail(post._id)\">{{post.title}}</a>\r\n        <div class=\"row my-3 align-items-center\">\r\n          <div v-if=\"post.image\" class=\"col-4\">\r\n            <img :src=\"post.image && post.image.url\" :alt=\"post.title\" class=\"rounded-lg\">\r\n          </div>\r\n          <p :class=\"{'col-8': post.image && post.image.url}\" class=\"text-muted\">{{post.excerpt}}</p>\r\n        </div>\r\n        <span class=\"text-muted\">{{post.createdAt}}</span>\r\n      </div>\r\n    </article>\r\n  </div>\r\n</template>\r\n\r\n<script lang='ts'>\r\n/* 使用store action异步加载 */\r\nimport {defineComponent, PropType,computed} from 'vue'\r\nimport {useStore} from 'vuex'\r\nimport {GlobalDataProps,PostProps} from '@/store/index'\r\n\r\nimport router from '@/route'\r\nexport default defineComponent({\r\n    props: {\r\n        list: {\r\n            require : true,\r\n            type: Array as PropType<PostProps[]>\r\n        },\r\n        currentId: {\r\n          require: true,\r\n          type: Number\r\n        }\r\n    },\r\n    setup(props) {\r\n      const store = useStore<GlobalDataProps>()\r\n      const lists  = computed(() => store.state.posts.filter(c => c.column == props.currentId))\r\n\r\n    // 更具计算属性把图片缩放\r\n    const PostList = computed(() => {\r\n      return props.list?.map((item)=> {\r\n        if (item.image) {\r\n          item.image.url = item.image.url + '?x-oss-process=image/resize,m_pad,h_50,w_50,color_FF0000'\r\n        }\r\n        return item\r\n      })\r\n    })\r\n      const goPostDetail = (id:string) => {\r\n        router.push({\r\n          name: 'PostDetail',\r\n          params: {\r\n            id\r\n          }\r\n        })\r\n      }\r\n      return {\r\n        lists,\r\n        goPostDetail,\r\n        PostList\r\n      }\r\n    }\r\n\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.card-body img {\r\n  width: 50px;\r\n  height: 50px;\r\n}\r\n</style>","\r\n/* 使用store action异步加载 */\r\nimport {defineComponent, PropType,computed} from 'vue'\r\nimport {useStore} from 'vuex'\r\nimport {GlobalDataProps,PostProps} from '@/store/index'\r\n\r\nimport router from '@/route'\r\nexport default defineComponent({\r\n    props: {\r\n        list: {\r\n            require : true,\r\n            type: Array as PropType<PostProps[]>\r\n        },\r\n        currentId: {\r\n          require: true,\r\n          type: Number\r\n        }\r\n    },\r\n    setup(props) {\r\n      const store = useStore<GlobalDataProps>()\r\n      const lists  = computed(() => store.state.posts.filter(c => c.column == props.currentId))\r\n\r\n    // 更具计算属性把图片缩放\r\n    const PostList = computed(() => {\r\n      return props.list?.map((item)=> {\r\n        if (item.image) {\r\n          item.image.url = item.image.url + '?x-oss-process=image/resize,m_pad,h_50,w_50,color_FF0000'\r\n        }\r\n        return item\r\n      })\r\n    })\r\n      const goPostDetail = (id:string) => {\r\n        router.push({\r\n          name: 'PostDetail',\r\n          params: {\r\n            id\r\n          }\r\n        })\r\n      }\r\n      return {\r\n        lists,\r\n        goPostDetail,\r\n        PostList\r\n      }\r\n    }\r\n\r\n})\r\n","import { render } from \"./PostList.vue?vue&type=template&id=0d9105c7&scoped=true\"\nimport script from \"./PostList.vue?vue&type=script&lang=ts\"\nexport * from \"./PostList.vue?vue&type=script&lang=ts\"\n\nimport \"./PostList.vue?vue&type=style&index=0&id=0d9105c7&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-0d9105c7\"\n\nexport default script","\r\n/* 使用store异步加载数据 */\r\nimport { defineComponent, onMounted,computed } from 'vue'\r\nimport { useRoute } from 'vue-router'\r\n\r\nimport {useStore} from 'vuex'\r\nimport {GlobalDataProps,ColumnProps} from '@/store/index'\r\nimport PostList from '@/components/PostList/PostList.vue'\r\n\r\nexport default defineComponent({\r\n  components: {\r\n    PostList\r\n  },\r\n  setup() {\r\n    const route = useRoute()\r\n    const store = useStore<GlobalDataProps>()\r\n    const currentId = route.query.id\r\n    onMounted(() => {\r\n    store.dispatch('fetchDetailColumn',{id:currentId})\r\n    store.dispatch('fetchPosts',{id:currentId})\r\n\r\n\r\n    })\r\n\r\n    \r\n\r\n    \r\n    // const column = computed(()=> store.state.columns.find(c => String(c.id) == currentId))\r\n\r\n    // const list = computed(()=> store.state.posts.filter(item => {\r\n    //   return String(item.columnId) == currentId\r\n    // }))\r\n\r\n    // 采用 store 的getters方式\r\n    // const column  = store.getters.getColumnById(currentId) as ColumnProps\r\n    // console.log('详情：',column);\r\n\r\n    const columnScale = computed(() => {\r\n      // 获取的column数据必须是在计算属性里面，不能放在计算属性外，否则提示错误\r\n        const column  = store.getters.getColumnById(currentId) as ColumnProps\r\n        if (column.avatar) {\r\n          column.avatar.url = column.avatar.url + \"?x-oss-process=image/resize,m_pad,h_50,w_50,color_FF0000\"\r\n        }\r\n        return column\r\n    }) \r\n\r\n    \r\n    \r\n    // const list  = store.getters.getPostListById(currentId) // 这里是原来的获取数据的方式\r\n    const list = computed(()=> store.state.posts) //这是后来获取数据的方式\r\n  \r\n    return {\r\n      // column,\r\n      list,\r\n      currentId: Number(currentId),\r\n      columnScale\r\n    }\r\n  }\r\n})\r\n","import { render } from \"./ColumnDetail.vue?vue&type=template&id=361fc9f6&scoped=true\"\nimport script from \"./ColumnDetail.vue?vue&type=script&lang=ts\"\nexport * from \"./ColumnDetail.vue?vue&type=script&lang=ts\"\n\nimport \"./ColumnDetail.vue?vue&type=style&index=0&id=361fc9f6&scoped=true&lang=css\"\nscript.render = render\nscript.__scopeId = \"data-v-361fc9f6\"\n\nexport default script","<template>\r\n  <div class=\"post-detail-page\">\r\n    <modal title=\"删除文章\" :visible=\"modalIsVisible\"\r\n      @modal-on-close=\"modalIsVisible = false\"\r\n      @modal-on-confirm=\"hideAndDelete\"\r\n    >\r\n      <p>确定要删除这篇文章吗？</p>\r\n    </modal>\r\n    <article class=\"w-75 mx-auto mb-5 pb-3\" v-if=\"currentPost\">\r\n      <img :src=\"currentImageUrl\" alt=\"currentPost.title\" class=\"rounded-lg img-fluid my-4\" v-if=\"currentImageUrl\">\r\n      <h2 class=\"mb-4\">{{currentPost.title}}</h2>\r\n      <div class=\"user-profile-component border-top border-bottom py-3 mb-5 align-items-center row g-0\">\r\n        <div class=\"col\">\r\n          <user-profile :user=\"currentPost.author\" v-if=\"typeof currentPost.author === 'object'\"></user-profile>\r\n        </div>\r\n        <span class=\"text-muted col text-right font-italic\">发表于：{{currentPost.createdAt}}</span>\r\n      </div>\r\n      <div v-html=\"currentHTML\"></div>\r\n      <div v-if=\"showEditArea\" class=\"btn-group mt-5\">\r\n        <router-link\r\n          type=\"button\"\r\n          class=\"btn btn-success\"\r\n          :to=\"{name: 'create', query: { id: currentPost._id}}\"\r\n        >\r\n          编辑\r\n        </router-link>\r\n        <button type=\"button\" class=\"btn btn-danger\" @click.prevent=\"modalIsVisible = true\">删除</button>\r\n      </div>\r\n    </article>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent, onMounted, computed, ref } from 'vue'\r\nimport MarkdownIt from 'markdown-it'\r\nimport { useStore } from 'vuex'\r\nimport { useRoute, useRouter } from 'vue-router'\r\nimport { GlobalDataProps, PostProps, ImageProps, UserProps, ResponseType } from '@/store/index'\r\nimport UserProfile from '@/components/UserProfile/UserProfile.vue'\r\nimport Modal from '@/components/Modal/Modal.vue'\r\nimport createMessage from '@/hooks/createMessage'\r\n\r\nexport default defineComponent({\r\n  name: 'post-detail',\r\n  components: {\r\n    UserProfile,\r\n    Modal\r\n  },\r\n  setup() {\r\n    const store = useStore<GlobalDataProps>()\r\n    const route = useRoute()\r\n    const router = useRouter()\r\n    const modalIsVisible = ref(false)\r\n    const currentId = route.params.id\r\n    const md = new MarkdownIt()\r\n    onMounted(() => {\r\n      store.dispatch('fetchPost', currentId)\r\n    })\r\n    const currentPost = computed<PostProps>(() => store.getters.getCurrentPost(currentId))\r\n    \r\n    const currentHTML = computed(() => {\r\n      console.log('currentPost.value==',currentPost.value);\r\n      \r\n      const { excerpt, isHTML } = currentPost.value\r\n      \r\n      if (currentPost.value && excerpt) {\r\n        // return isHTML ? content : md.render(content)\r\n        return  md.render(excerpt)\r\n      } else {\r\n        return ''\r\n      }\r\n    })\r\n    \r\n    const showEditArea = computed(() => {\r\n      const { isLogin, _id } = store.state.user\r\n      if (currentPost.value && currentPost.value.author && isLogin) {\r\n        const postAuthor = currentPost.value.author as UserProps\r\n        return postAuthor._id === _id\r\n      } else {\r\n        return false\r\n      }\r\n    })\r\n    const currentImageUrl = computed(() => {\r\n      if (currentPost.value && currentPost.value.image) {\r\n        console.log(111);\r\n        const imgstr = '?x-oss-process=image/resize,m_pad,h_50,w_50,color_FF0000'\r\n        const { image } = currentPost.value\r\n        var reg = RegExp(/x-oss-process=image/);\r\n        const tempImgUrl = (image as ImageProps).url || ''\r\n        \r\n        return reg.test(tempImgUrl) ? tempImgUrl:(tempImgUrl+imgstr)\r\n      } else {\r\n        return null\r\n      }\r\n    })\r\n    \r\n    const hideAndDelete = () => {\r\n      modalIsVisible.value = false\r\n      store.dispatch('deletePost', currentId).then((rawData: ResponseType<PostProps>) => {\r\n        createMessage('删除成功，2秒后跳转到专栏首页', 'success', 2000)\r\n        let params = { id: rawData.data.column }\r\n\r\n        \r\n        setTimeout(() => {\r\n          // router.push({ name: 'column', params: { id: rawData.data.column } })\r\n          router.push({\r\n            name: 'columnDetail',\r\n            query:params\r\n          })\r\n        }, 2000)\r\n      })\r\n    }\r\n    return {\r\n      currentPost,\r\n      currentImageUrl,\r\n      currentHTML,\r\n      showEditArea,\r\n      modalIsVisible,\r\n      hideAndDelete\r\n    }\r\n  }\r\n})\r\n</script>\r\n","<template>\n  <div class=\"user-profile-component\">\n    <div class=\"d-flex align-items-center\">\n      <img :src=\"fitUrl\" :alt=\"user.nickName\" class=\"rounded-circle img-thumbnail\">\n      <div class=\"detail ml-2\">\n        <h6 class=\"d-block mb-0\">{{user.nickName}}</h6>\n        <span class=\"text-truncate text-muted d-block\">{{user.description}}</span>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, computed, PropType } from 'vue'\nimport { UserProps } from '@/store/index'\nimport { addColumnAvatar } from '@/helper/helper'\nexport default defineComponent({\n  props: {\n    user: {\n      type: Object as PropType<UserProps>,\n      required: true\n    }\n  },\n  setup(props) {\n    const fitUrl = computed(() => {\n      addColumnAvatar(props.user, 50, 50)\n      const { avatar } = props.user\n      return avatar && avatar.fitUrl\n    })\n    return {\n      fitUrl\n    }\n  }\n})\n</script>\n\n<style>\n\n.user-profile-component img {\n  width: 50px;\n  height: 50px;\n  /* border: 1px solid #ccc;\n  border-radius: 50px; */\n}\n\n</style>\n","import { ColumnProps, ImageProps, UserProps } from '@/store/index'\r\n\r\nexport function generateFitUrl(data: ImageProps, width: number, height: number, format = ['m_pad']) {\r\n  if (data && data.url) {\r\n    const formatStr = format.reduce((prev, current) => {\r\n      return current + ',' + prev\r\n    }, '')\r\n    data.fitUrl = data.url + `?x-oss-process=image/resize,${formatStr}h_${height},w_${width}`\r\n  }\r\n}\r\n\r\nexport function addColumnAvatar(data: ColumnProps | UserProps, width: number, height: number) {\r\n  if (data.avatar) {\r\n    generateFitUrl(data.avatar, width, height)\r\n  } else {\r\n    const parseCol = data as ColumnProps\r\n    data.avatar = {\r\n      fitUrl: require(parseCol.title ? '@/assets/column.jpg' : '@/assets/avatar.jpg')\r\n    }\r\n  }\r\n}\r\n\r\ninterface CheckCondition {\r\n  format?: string[];\r\n  size?: number;\r\n}\r\ntype ErrorType = 'size' | 'format' | null\r\nexport function beforeUploadCheck(file: File, condition: CheckCondition) {\r\n  const { format, size } = condition\r\n  const isValidFormat = format ? format.includes(file.type) : true\r\n  const isValidSize = size ? (file.size / 1024 / 1024 < size) : true\r\n  let error: ErrorType = null\r\n  if (!isValidFormat) {\r\n    error = 'format'\r\n  }\r\n  if (!isValidSize) {\r\n    error = 'size'\r\n  }\r\n  return {\r\n    passed: isValidFormat && isValidSize,\r\n    error\r\n  }\r\n}\r\ninterface TestProps {\r\n  _id: string;\r\n  name: string;\r\n}\r\nconst testData: TestProps[] = [{ _id: '1', name: 'a' }, { _id: '2', name: 'b' }]\r\n\r\nexport const arrToObj = <T extends { _id?: string }>(arr: Array<T>) => {\r\n  return arr.reduce((prev, current) => {\r\n    if (current._id) {\r\n      prev[current._id] = current\r\n    }\r\n    return prev\r\n  }, {} as { [key: string]: T })\r\n}\r\nconst result = arrToObj(testData)\r\nconsole.log(result)\r\nexport const objToArr = <T>(obj: {[key: string]: T}) => {\r\n  return Object.keys(obj).map(key => obj[key])\r\n}\r\nconst testData2: {[key: string]: TestProps} = {\r\n  1: { _id: '1', name: 'a' },\r\n  2: { _id: '2', name: 'b' }\r\n}\r\n\r\nconst result2 = objToArr(testData2)\r\nconsole.log(result2)\r\n","\nimport { defineComponent, computed, PropType } from 'vue'\nimport { UserProps } from '@/store/index'\nimport { addColumnAvatar } from '@/helper/helper'\nexport default defineComponent({\n  props: {\n    user: {\n      type: Object as PropType<UserProps>,\n      required: true\n    }\n  },\n  setup(props) {\n    const fitUrl = computed(() => {\n      addColumnAvatar(props.user, 50, 50)\n      const { avatar } = props.user\n      return avatar && avatar.fitUrl\n    })\n    return {\n      fitUrl\n    }\n  }\n})\n","import { render } from \"./UserProfile.vue?vue&type=template&id=5da5f91c\"\nimport script from \"./UserProfile.vue?vue&type=script&lang=ts\"\nexport * from \"./UserProfile.vue?vue&type=script&lang=ts\"\n\nimport \"./UserProfile.vue?vue&type=style&index=0&id=5da5f91c&lang=css\"\nscript.render = render\n\nexport default script","<template>\r\n<teleport to=\"#modal\">\r\n  <div class=\"modal d-block\" tabindex=\"-1\" v-if=\"visible\">\r\n    <div class=\"modal-dialog\">\r\n      <div class=\"modal-content\">\r\n        <div class=\"modal-header\">\r\n          <h5 class=\"modal-title\">{{title}}</h5>\r\n          <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n            <span aria-hidden=\"true\" @click=\"onClose\">&times;</span>\r\n          </button>\r\n        </div>\r\n        <div class=\"modal-body\">\r\n          <slot></slot>\r\n        </div>\r\n        <div class=\"modal-footer\">\r\n          <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\"  @click=\"onClose\">取消</button>\r\n          <button type=\"button\" class=\"btn btn-primary\"  @click=\"onConfirm\">确定</button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</teleport>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent } from 'vue'\r\nimport useDOMCreate from '@/hooks/useDOMCreate'\r\nexport default defineComponent({\r\n  name: 'modal',\r\n  props: {\r\n    title: String,\r\n    visible: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n  emits: ['modal-on-close', 'modal-on-confirm'],\r\n  setup(props, context) {\r\n    useDOMCreate('modal')\r\n    const onClose = () => {\r\n      context.emit('modal-on-close')\r\n    }\r\n    const onConfirm = () => {\r\n      context.emit('modal-on-confirm')\r\n    }\r\n    return {\r\n      onClose,\r\n      onConfirm\r\n    }\r\n  }\r\n})\r\n</script>\r\n","\r\nimport { defineComponent } from 'vue'\r\nimport useDOMCreate from '@/hooks/useDOMCreate'\r\nexport default defineComponent({\r\n  name: 'modal',\r\n  props: {\r\n    title: String,\r\n    visible: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n  emits: ['modal-on-close', 'modal-on-confirm'],\r\n  setup(props, context) {\r\n    useDOMCreate('modal')\r\n    const onClose = () => {\r\n      context.emit('modal-on-close')\r\n    }\r\n    const onConfirm = () => {\r\n      context.emit('modal-on-confirm')\r\n    }\r\n    return {\r\n      onClose,\r\n      onConfirm\r\n    }\r\n  }\r\n})\r\n","import { render } from \"./Modal.vue?vue&type=template&id=de94a670\"\nimport script from \"./Modal.vue?vue&type=script&lang=ts\"\nexport * from \"./Modal.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","\r\nimport { defineComponent, onMounted, computed, ref } from 'vue'\r\nimport MarkdownIt from 'markdown-it'\r\nimport { useStore } from 'vuex'\r\nimport { useRoute, useRouter } from 'vue-router'\r\nimport { GlobalDataProps, PostProps, ImageProps, UserProps, ResponseType } from '@/store/index'\r\nimport UserProfile from '@/components/UserProfile/UserProfile.vue'\r\nimport Modal from '@/components/Modal/Modal.vue'\r\nimport createMessage from '@/hooks/createMessage'\r\n\r\nexport default defineComponent({\r\n  name: 'post-detail',\r\n  components: {\r\n    UserProfile,\r\n    Modal\r\n  },\r\n  setup() {\r\n    const store = useStore<GlobalDataProps>()\r\n    const route = useRoute()\r\n    const router = useRouter()\r\n    const modalIsVisible = ref(false)\r\n    const currentId = route.params.id\r\n    const md = new MarkdownIt()\r\n    onMounted(() => {\r\n      store.dispatch('fetchPost', currentId)\r\n    })\r\n    const currentPost = computed<PostProps>(() => store.getters.getCurrentPost(currentId))\r\n    \r\n    const currentHTML = computed(() => {\r\n      console.log('currentPost.value==',currentPost.value);\r\n      \r\n      const { excerpt, isHTML } = currentPost.value\r\n      \r\n      if (currentPost.value && excerpt) {\r\n        // return isHTML ? content : md.render(content)\r\n        return  md.render(excerpt)\r\n      } else {\r\n        return ''\r\n      }\r\n    })\r\n    \r\n    const showEditArea = computed(() => {\r\n      const { isLogin, _id } = store.state.user\r\n      if (currentPost.value && currentPost.value.author && isLogin) {\r\n        const postAuthor = currentPost.value.author as UserProps\r\n        return postAuthor._id === _id\r\n      } else {\r\n        return false\r\n      }\r\n    })\r\n    const currentImageUrl = computed(() => {\r\n      if (currentPost.value && currentPost.value.image) {\r\n        console.log(111);\r\n        const imgstr = '?x-oss-process=image/resize,m_pad,h_50,w_50,color_FF0000'\r\n        const { image } = currentPost.value\r\n        var reg = RegExp(/x-oss-process=image/);\r\n        const tempImgUrl = (image as ImageProps).url || ''\r\n        \r\n        return reg.test(tempImgUrl) ? tempImgUrl:(tempImgUrl+imgstr)\r\n      } else {\r\n        return null\r\n      }\r\n    })\r\n    \r\n    const hideAndDelete = () => {\r\n      modalIsVisible.value = false\r\n      store.dispatch('deletePost', currentId).then((rawData: ResponseType<PostProps>) => {\r\n        createMessage('删除成功，2秒后跳转到专栏首页', 'success', 2000)\r\n        let params = { id: rawData.data.column }\r\n\r\n        \r\n        setTimeout(() => {\r\n          // router.push({ name: 'column', params: { id: rawData.data.column } })\r\n          router.push({\r\n            name: 'columnDetail',\r\n            query:params\r\n          })\r\n        }, 2000)\r\n      })\r\n    }\r\n    return {\r\n      currentPost,\r\n      currentImageUrl,\r\n      currentHTML,\r\n      showEditArea,\r\n      modalIsVisible,\r\n      hideAndDelete\r\n    }\r\n  }\r\n})\r\n","import { render } from \"./PostDetail.vue?vue&type=template&id=5a235031\"\nimport script from \"./PostDetail.vue?vue&type=script&lang=ts\"\nexport * from \"./PostDetail.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script","<template>\r\n  <div class=\"signup-page mx-auto p-3 w-330\">\r\n    <h5 class=\"my-4 text-center\">注册者也账户</h5>\r\n    <validate-form @form-submit=\"onFormsubmit\">\r\n      <div class=\"mb-3\">\r\n        <label class=\"form-label\">邮箱地址</label>\r\n        <validate-input\r\n          placeholder=\"请输入邮箱地址\"\r\n          type=\"text\"\r\n          v-model=\"formData.email\"\r\n          :rules=\"emailRules\"\r\n        />\r\n      </div>\r\n      <div class=\"mb-3\">\r\n        <label class=\"form-label\">昵称</label>\r\n        <validate-input\r\n          placeholder=\"请输入昵称\"\r\n          type=\"text\"\r\n          v-model=\"formData.nickName\"\r\n          :rules=\"nameRules\"\r\n        />\r\n      </div>\r\n      <div class=\"mb-3\">\r\n        <label class=\"form-label\">密码</label>\r\n        <validate-input\r\n          type=\"password\"\r\n          placeholder=\"请输入密码\"\r\n          v-model=\"formData.password\"\r\n          :rules=\"passwordRules\"\r\n        />\r\n      </div>\r\n      <div class=\"mb-3\">\r\n        <label class=\"form-label\">重复密码</label>\r\n        <validate-input\r\n          type=\"password\"\r\n          placeholder=\"请再次密码\"\r\n          v-model=\"formData.repeatPassword\"\r\n            :rules=\"repeatPasswordRules\"\r\n        />\r\n      </div>\r\n      <template #submit>\r\n        <button type=\"submit\" class=\"btn btn-primary btn-block btn-large\">注册新用户</button>\r\n      </template>\r\n    </validate-form>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent, reactive } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\nimport {signup,signupProps} from '@/api/index'\r\nimport ValidateInput,{RuleProps} from '@/components/validateInput/validateInput.vue'\r\nimport ValidateForm from '@/components/ValidateForm/ValidateForm.vue'\r\nimport createMessage from '@/hooks/createMessage' // 采用函数调用的形式\r\nimport {useStore} from 'vuex'\r\nimport {GlobalDataProps} from '@/store/index'\r\n\r\nexport default defineComponent({\r\n  name: 'Signup',\r\n  components: {\r\n    ValidateInput,\r\n    ValidateForm\r\n  },\r\n  setup() {\r\n    const formData = reactive({\r\n      email: '',\r\n      nickName: '',\r\n      password: '',\r\n      repeatPassword: ''\r\n    })\r\n\r\n   const router = useRouter()\r\n   const store = useStore<GlobalDataProps>()\r\n    const emailRules: RuleProps = [\r\n      { type: 'required', message: '电子邮箱地址不能为空' },\r\n      { type: 'email', message: '请输入正确的电子邮箱格式' }\r\n    ]\r\n    const nameRules: RuleProps = [\r\n      { type: 'required', message: '昵称不能为空' }\r\n    ]\r\n    const passwordRules: RuleProps = [\r\n      { type: 'required', message: '密码不能为空' },\r\n      {type: 'passwordLen', message: '密码长度不能低于6个字符'}\r\n    ]\r\n    const repeatPasswordRules: RuleProps = [\r\n      { type: 'required', message: '重复密码不能为空' },\r\n      {\r\n        type: 'custom',\r\n        validator: () => {\r\n          return formData.password === formData.repeatPassword\r\n        },\r\n        message: '密码不相同'\r\n      }\r\n    ]\r\n\r\n    const onFormsubmit = (result: boolean)=> {\r\n        console.log(result);\r\n        if (result) {\r\n         \r\n            let param:signupProps = {\r\n                email: formData.email,\r\n                nickName: formData.nickName,\r\n                password: formData.password\r\n            }\r\n            signup(param).then(res => {\r\n                console.log('注册成功：',res);\r\n                const {email} = res.data.data\r\n                localStorage.setItem('signupData',email)\r\n                createMessage('注册成功','success')\r\n                setTimeout(()=> {\r\n                    router.push('/login')\r\n                },2000)\r\n                \r\n            }).catch(err => {\r\n                console.log('注册失败：',err);\r\n                createMessage(err,'error')\r\n            })\r\n        }\r\n        \r\n    }\r\n\r\n \r\n  \r\n    return {\r\n        formData,\r\n        onFormsubmit,\r\n        emailRules,\r\n        nameRules,\r\n        passwordRules,\r\n        repeatPasswordRules\r\n\r\n    }\r\n  }\r\n})\r\n</script>\r\n\r\n<style>\r\n.w-330 {\r\n  max-width: 330px;\r\n}\r\n</style>\r\n","\r\nimport { defineComponent, reactive } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\nimport {signup,signupProps} from '@/api/index'\r\nimport ValidateInput,{RuleProps} from '@/components/validateInput/validateInput.vue'\r\nimport ValidateForm from '@/components/ValidateForm/ValidateForm.vue'\r\nimport createMessage from '@/hooks/createMessage' // 采用函数调用的形式\r\nimport {useStore} from 'vuex'\r\nimport {GlobalDataProps} from '@/store/index'\r\n\r\nexport default defineComponent({\r\n  name: 'Signup',\r\n  components: {\r\n    ValidateInput,\r\n    ValidateForm\r\n  },\r\n  setup() {\r\n    const formData = reactive({\r\n      email: '',\r\n      nickName: '',\r\n      password: '',\r\n      repeatPassword: ''\r\n    })\r\n\r\n   const router = useRouter()\r\n   const store = useStore<GlobalDataProps>()\r\n    const emailRules: RuleProps = [\r\n      { type: 'required', message: '电子邮箱地址不能为空' },\r\n      { type: 'email', message: '请输入正确的电子邮箱格式' }\r\n    ]\r\n    const nameRules: RuleProps = [\r\n      { type: 'required', message: '昵称不能为空' }\r\n    ]\r\n    const passwordRules: RuleProps = [\r\n      { type: 'required', message: '密码不能为空' },\r\n      {type: 'passwordLen', message: '密码长度不能低于6个字符'}\r\n    ]\r\n    const repeatPasswordRules: RuleProps = [\r\n      { type: 'required', message: '重复密码不能为空' },\r\n      {\r\n        type: 'custom',\r\n        validator: () => {\r\n          return formData.password === formData.repeatPassword\r\n        },\r\n        message: '密码不相同'\r\n      }\r\n    ]\r\n\r\n    const onFormsubmit = (result: boolean)=> {\r\n        console.log(result);\r\n        if (result) {\r\n         \r\n            let param:signupProps = {\r\n                email: formData.email,\r\n                nickName: formData.nickName,\r\n                password: formData.password\r\n            }\r\n            signup(param).then(res => {\r\n                console.log('注册成功：',res);\r\n                const {email} = res.data.data\r\n                localStorage.setItem('signupData',email)\r\n                createMessage('注册成功','success')\r\n                setTimeout(()=> {\r\n                    router.push('/login')\r\n                },2000)\r\n                \r\n            }).catch(err => {\r\n                console.log('注册失败：',err);\r\n                createMessage(err,'error')\r\n            })\r\n        }\r\n        \r\n    }\r\n\r\n \r\n  \r\n    return {\r\n        formData,\r\n        onFormsubmit,\r\n        emailRules,\r\n        nameRules,\r\n        passwordRules,\r\n        repeatPasswordRules\r\n\r\n    }\r\n  }\r\n})\r\n","import { render } from \"./Signup.vue?vue&type=template&id=403eb674\"\nimport script from \"./Signup.vue?vue&type=script&lang=ts\"\nexport * from \"./Signup.vue?vue&type=script&lang=ts\"\n\nimport \"./Signup.vue?vue&type=style&index=0&id=403eb674&lang=css\"\nscript.render = render\n\nexport default script","<template>\r\n  <div class=\"create-post-page\">\r\n    <h4>{{route.query.id ? '编辑文章' : '新建文章'}}</h4>\r\n    <Uploader\r\n    action=\"/upload\"\r\n    :boforeUpload=\"uploadCheck\"\r\n    @file-uploaded=\"fileUploaded\"\r\n    class=\"d-flex align-items-center justify-content-center bg-light text-secondary w-100 my-4\"\r\n    >\r\n      <h4>点击上传头图</h4>\r\n      <template #loading>\r\n          <div class=\"d-flex\">\r\n            <div class=\"spinner-border text-secondary\" role=\"status\">\r\n              <span class=\"visually-hidden\">Loading...</span>\r\n            </div>\r\n            <h2>正在上传</h2>\r\n          </div>\r\n      </template>\r\n\r\n      <template #uploaded=\"dataProps\">\r\n          <img :src=\"dataProps.uploadData.data.url\" alt=\"\">\r\n      </template>\r\n      \r\n      <template #error>\r\n        <h4>上传失败</h4>\r\n      </template>\r\n      \r\n    </Uploader>\r\n    <validate-form @form-submit=\"onFormSubmit\">\r\n      <div class=\"mb-3\">\r\n        <label class=\"form-label\">文章标题：</label>\r\n        <validate-input\r\n          :rules=\"titleRules\" v-model=\"titleVal\"\r\n          placeholder=\"请输入文章标题\"\r\n          type=\"text\"\r\n        />\r\n      </div>\r\n      <div class=\"mb-3\">\r\n        <label class=\"form-label\">文章详情：</label>\r\n        <validate-input\r\n          rows=\"10\"\r\n          tag=\"textarea\"\r\n          placeholder=\"请输入文章详情\"\r\n          :rules=\"contentRules\"\r\n          v-model=\"contentVal\"\r\n        />\r\n      </div>\r\n      <template #submit>\r\n        <button class=\"btn btn-primary btn-large\">\r\n          {{route.query.id  ? '更新文章' : '发表文章'}}\r\n        </button>\r\n      </template>\r\n    </validate-form>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\n/* 添加自定义上传文件的样式 */\r\nimport { defineComponent, ref, onMounted, computed } from 'vue'\r\nimport { useStore } from 'vuex'\r\nimport { useRouter, useRoute } from 'vue-router'\r\n\r\nimport {GlobalDataProps,ResponseType,ImageProps} from '@/store/index'\r\n\r\nimport ValidateInput,{RuleProps} from '@/components/validateInput/validateInput.vue'\r\nimport ValidateForm from '@/components/ValidateForm/ValidateForm.vue'\r\n\r\nimport Uploader from '@/components/Uploader/Uploader.vue'\r\n\r\nimport {beforeUploadCheck} from '@/helper/helper'\r\nimport createMessage from '@/hooks/createMessage'\r\n\r\nimport {createPosts} from '@/api/index'\r\n\r\nexport default defineComponent({\r\n  name: 'CreatePost',\r\n  components: {\r\n    ValidateInput,\r\n    ValidateForm,\r\n    Uploader\r\n  },\r\n  setup() {\r\n    const uploadedData = ref()\r\n    const titleVal = ref('')\r\n    const router = useRouter()\r\n    const route = useRoute()\r\n    const store = useStore<GlobalDataProps>()\r\n    const imgUrl = ref('')\r\n    // store.commit('setUnAbleCreate',false)\r\n    const titleRules: RuleProps = [\r\n      { type: 'required', message: '文章标题不能为空' }\r\n    ]\r\n    const contentVal = ref('')\r\n    const contentRules: RuleProps = [\r\n      { type: 'required', message: '文章详情不能为空' }\r\n    ]\r\n    onMounted(() => {\r\n      console.log('onMounted......');\r\n      console.log('route.query.id==',route.query.id);\r\n      \r\n      \r\n    })\r\n    \r\n    const fileUploaded = (data:ResponseType<ImageProps>) => {\r\n      console.log('上传成功',data.data._id);\r\n      if (data.data._id) {\r\n        imgUrl.value = data.data._id\r\n      }\r\n      console.log('imgUrl==',imgUrl.value);\r\n      \r\n      \r\n    }\r\n   \r\n   const currentId = computed(()=> store.state.currentId)\r\n   console.log('currentId1',currentId);\r\n   const aa = localStorage.getItem('currentID')\r\n   console.log('aa=',aa);\r\n   \r\n   const user = computed(() => store.state.user)\r\n   console.log('user:',user);\r\n   \r\n  const {column,email,nickName,_id} = user.value\r\n    const onFormSubmit = (result: boolean) => {\r\n      console.log('onFormSubmit...',result);\r\n\r\n    if (result) {\r\n       console.log('currentId2',currentId.value);\r\n      const param = {\r\n        \"title\": titleVal.value,\r\n        \"content\": contentVal.value,\r\n        \"image\": imgUrl.value,\r\n        \"column\": currentId.value,\r\n        // \"column\": '5f3e86d62c56ee13bb83096c',\r\n        // \"column\": column,\r\n        \"author\": _id\r\n      }\r\n      createPosts(param).then(res => {\r\n        createMessage('穿件文章成功,2秒钟跳转到文章列表','success')\r\n        setTimeout(()=> {\r\n          router.push({name:'columnDetail',query:{id:currentId.value}})\r\n        },2000)\r\n        \r\n      }).catch(err => {\r\n        createMessage('创建失败','error')\r\n        console.log('创建失败：',err);\r\n        \r\n      })\r\n    }\r\n      \r\n    }\r\n\r\n    // 定义校验上传图片的函数\r\n    const uploadCheck = (file: File) => {\r\n      const result = beforeUploadCheck(file,{format: ['image/jpeg','image/png'],size:1})\r\n      const {passed,error} = result\r\n      console.log('错误提示：',error);\r\n      \r\n      if (error === 'format') {\r\n        createMessage('只能上传图片格式jpeg或png','error')\r\n      } \r\n\r\n      if (error === 'size') {\r\n        createMessage('只能上传小于1M的图片','error')\r\n      } \r\n      return passed\r\n\r\n    }\r\n    \r\n    return {\r\n      titleRules,\r\n      titleVal,\r\n      contentVal,\r\n      contentRules,\r\n      onFormSubmit,\r\n      uploadedData,\r\n      route,\r\n      uploadCheck,\r\n      fileUploaded\r\n    }\r\n  }\r\n})\r\n</script>\r\n<style>\r\n.create-post-page .file-upload-container {\r\n  height: 200px;\r\n  cursor: pointer;\r\n  overflow: hidden;\r\n}\r\n.create-post-page .file-upload-container img {\r\n  width: 100%;\r\n  height: 100%;\r\n  object-fit: cover;\r\n}\r\n.uploaded-area {\r\n  position: relative;\r\n}\r\n.uploaded-area:hover h3 {\r\n  display: block;\r\n}\r\n.uploaded-area h3 {\r\n  display: none;\r\n  position: absolute;\r\n  color: #999;\r\n  text-align: center;\r\n  width: 100%;\r\n  top: 50%;\r\n}\r\n</style>\r\n","\r\n/* 添加自定义上传文件的样式 */\r\nimport { defineComponent, ref, onMounted, computed } from 'vue'\r\nimport { useStore } from 'vuex'\r\nimport { useRouter, useRoute } from 'vue-router'\r\n\r\nimport {GlobalDataProps,ResponseType,ImageProps} from '@/store/index'\r\n\r\nimport ValidateInput,{RuleProps} from '@/components/validateInput/validateInput.vue'\r\nimport ValidateForm from '@/components/ValidateForm/ValidateForm.vue'\r\n\r\nimport Uploader from '@/components/Uploader/Uploader.vue'\r\n\r\nimport {beforeUploadCheck} from '@/helper/helper'\r\nimport createMessage from '@/hooks/createMessage'\r\n\r\nimport {createPosts} from '@/api/index'\r\n\r\nexport default defineComponent({\r\n  name: 'CreatePost',\r\n  components: {\r\n    ValidateInput,\r\n    ValidateForm,\r\n    Uploader\r\n  },\r\n  setup() {\r\n    const uploadedData = ref()\r\n    const titleVal = ref('')\r\n    const router = useRouter()\r\n    const route = useRoute()\r\n    const store = useStore<GlobalDataProps>()\r\n    const imgUrl = ref('')\r\n    // store.commit('setUnAbleCreate',false)\r\n    const titleRules: RuleProps = [\r\n      { type: 'required', message: '文章标题不能为空' }\r\n    ]\r\n    const contentVal = ref('')\r\n    const contentRules: RuleProps = [\r\n      { type: 'required', message: '文章详情不能为空' }\r\n    ]\r\n    onMounted(() => {\r\n      console.log('onMounted......');\r\n      console.log('route.query.id==',route.query.id);\r\n      \r\n      \r\n    })\r\n    \r\n    const fileUploaded = (data:ResponseType<ImageProps>) => {\r\n      console.log('上传成功',data.data._id);\r\n      if (data.data._id) {\r\n        imgUrl.value = data.data._id\r\n      }\r\n      console.log('imgUrl==',imgUrl.value);\r\n      \r\n      \r\n    }\r\n   \r\n   const currentId = computed(()=> store.state.currentId)\r\n   console.log('currentId1',currentId);\r\n   const aa = localStorage.getItem('currentID')\r\n   console.log('aa=',aa);\r\n   \r\n   const user = computed(() => store.state.user)\r\n   console.log('user:',user);\r\n   \r\n  const {column,email,nickName,_id} = user.value\r\n    const onFormSubmit = (result: boolean) => {\r\n      console.log('onFormSubmit...',result);\r\n\r\n    if (result) {\r\n       console.log('currentId2',currentId.value);\r\n      const param = {\r\n        \"title\": titleVal.value,\r\n        \"content\": contentVal.value,\r\n        \"image\": imgUrl.value,\r\n        \"column\": currentId.value,\r\n        // \"column\": '5f3e86d62c56ee13bb83096c',\r\n        // \"column\": column,\r\n        \"author\": _id\r\n      }\r\n      createPosts(param).then(res => {\r\n        createMessage('穿件文章成功,2秒钟跳转到文章列表','success')\r\n        setTimeout(()=> {\r\n          router.push({name:'columnDetail',query:{id:currentId.value}})\r\n        },2000)\r\n        \r\n      }).catch(err => {\r\n        createMessage('创建失败','error')\r\n        console.log('创建失败：',err);\r\n        \r\n      })\r\n    }\r\n      \r\n    }\r\n\r\n    // 定义校验上传图片的函数\r\n    const uploadCheck = (file: File) => {\r\n      const result = beforeUploadCheck(file,{format: ['image/jpeg','image/png'],size:1})\r\n      const {passed,error} = result\r\n      console.log('错误提示：',error);\r\n      \r\n      if (error === 'format') {\r\n        createMessage('只能上传图片格式jpeg或png','error')\r\n      } \r\n\r\n      if (error === 'size') {\r\n        createMessage('只能上传小于1M的图片','error')\r\n      } \r\n      return passed\r\n\r\n    }\r\n    \r\n    return {\r\n      titleRules,\r\n      titleVal,\r\n      contentVal,\r\n      contentRules,\r\n      onFormSubmit,\r\n      uploadedData,\r\n      route,\r\n      uploadCheck,\r\n      fileUploaded\r\n    }\r\n  }\r\n})\r\n","import { render } from \"./CreatePost.vue?vue&type=template&id=c2689340\"\nimport script from \"./CreatePost.vue?vue&type=script&lang=ts\"\nexport * from \"./CreatePost.vue?vue&type=script&lang=ts\"\n\nimport \"./CreatePost.vue?vue&type=style&index=0&id=c2689340&lang=css\"\nscript.render = render\n\nexport default script","/* 修改路由，添加文章详情路由 */\r\n\r\nimport  {createRouter,createWebHashHistory} from 'vue-router'\r\n\r\nimport Home from '@/components/home/index.vue'\r\nimport Login from '@/components/login/index.vue'\r\nimport TestPage from '@/components/mytest/testPage/index.vue'\r\nimport TestUseRooute1 from '@/components/mytest/testPage/testUseRoute/index1.vue'\r\nimport TestUseRooute2 from '@/components/mytest/testPage/testUseRoute/index2.vue'\r\nimport ColumnDetail from '@/components/ColumnDetail/ColumnDetail.vue'\r\nimport PostDetail from '@/views/PostDetail/PostDetail.vue'\r\n\r\nimport Signup from '@/components/Signup/Signup.vue'\r\n\r\nimport store from '@/store/index'\r\nimport axios from 'axios'\r\n\r\nimport CreatePost from '@/components/Post/CreatePost/CreatePost.vue'\r\nconst routerHistory = createWebHashHistory()\r\nconst router = createRouter({\r\n    history: routerHistory,\r\n    routes: [\r\n        {\r\n            path: '/',\r\n            name: 'home',\r\n            component: Home\r\n        },\r\n        {\r\n            path: '/login',\r\n            name: 'login',\r\n            component: Login,\r\n            meta: {\r\n                redictAlreadyLogin: true // 表示是登录页面\r\n            }\r\n        },\r\n        {\r\n            path: '/signup',\r\n            name: 'signup',\r\n            component: Signup\r\n        },\r\n        {\r\n            path: '/test',\r\n            name: 'test',\r\n            component: TestPage\r\n        },\r\n        {\r\n            path: '/useRoute1/:id',\r\n            name: 'useRoute1',\r\n            component: TestUseRooute1\r\n        },\r\n        {\r\n            path: '/useRoute2/:id',\r\n            name: 'useRoute2',\r\n            component: TestUseRooute2\r\n        },\r\n        {\r\n            path: '/columnDetail',\r\n            name: 'columnDetail',\r\n            component: ColumnDetail,\r\n            meta: {\r\n                UnAbleCreate: true,\r\n                requiredLogin: true, // 表示需要登录，才可以访问\r\n                isColumnDetail: true\r\n            }\r\n        },\r\n        {\r\n            path: '/PostDetail/:id',\r\n            name: 'PostDetail',\r\n            component: PostDetail\r\n        },\r\n        {\r\n            path: '/create',\r\n            name: 'create',\r\n            component: CreatePost,\r\n            meta: {\r\n                UnAbleCreate: true,\r\n                requiredLogin: true, // 表示需要登录，才可以访问\r\n            }\r\n        }\r\n    ]\r\n})\r\nrouter.beforeEach((to, from, next) => {\r\n    const {user,token} = store.state\r\n    const {requiredLogin,redictAlreadyLogin,isColumnDetail} = to.meta\r\n        //  console.log('from==',from);\r\n        //  console.log('to===',to);\r\n         \r\n            \r\n    if(isColumnDetail) {\r\n        store.commit('setUnAbleCreate',false)\r\n        store.commit('setCurrentId',to.query.id)\r\n    } else {\r\n        store.commit('setUnAbleCreate',true)\r\n    }\r\n    if (!user.isLogin) {//如果没有登录\r\n        if (token) { \r\n            //说明token存在，isLogin却为false，可能是因为刷新vuex数据丢失导致的\r\n\r\n            // 判断如果没有登录，但token存在，那么久直接去获取用户的信息\r\n            axios.defaults.headers.common.Authorization = `Bearer ${token}`\r\n            store.dispatch('featchCurrentUser').then(() => {\r\n                // 说明此时token有效\r\n                if (redictAlreadyLogin) {\r\n                    // 判断是否是要跳转到登录页面，因为已经存在有效的token，不需要登录，直接跳转到首页\r\n                    next('/')\r\n                } else {\r\n                    next()\r\n                }\r\n            }).catch(err => {\r\n                // 说明此时token已经失效了,需要重新获取\r\n                next('/login')\r\n                store.commit('loginOut')\r\n            })\r\n\r\n\r\n        } else { \r\n            // 连token都不存在，因为有些请求是不需要token的\r\n\r\n            if (requiredLogin) {\r\n                // 判断是否需要登录，如果需要登录，因为token不存在了，我们就需要登录，重新获得token\r\n                next('/login')\r\n            } else {\r\n                next()\r\n            }\r\n            \r\n        }\r\n\r\n    } else { // 登录的情况下\r\n        if (redictAlreadyLogin) { \r\n            // 登录的情况下，当再跳转到登录页面时，我们就重定向到首页去\r\n            next('/')\r\n        } else {\r\n            // 登录的情况下，我们要跳到不是登录的其他页面，我们就放行\r\n            next()\r\n        }\r\n\r\n    }\r\n\r\n})\r\n\r\nexport default router","import { createApp } from 'vue'\r\nimport App from './App.vue'\r\n\r\nimport router from './route/index'\r\n\r\nimport store from './store/index'\r\n\r\nconst app = createApp(App)\r\napp.use(router)\r\napp.use(store)\r\napp.mount('#app')\r\n","module.exports = __webpack_public_path__ + \"img/logo.82b9c7a5.png\";","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./DropdownItem.vue?vue&type=style&index=0&id=ce05ae80&lang=css\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./PostList.vue?vue&type=style&index=0&id=0d9105c7&scoped=true&lang=css\""],"sourceRoot":""}